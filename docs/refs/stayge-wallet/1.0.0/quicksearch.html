<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"wallet_index.js.html":{"id":"wallet_index.js.html","title":"Source: wallet/index.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: wallet/index.js /** * STAYGE wallet module for javascript * @module stayge-wallet */ 'use strict' const fs = require('fs') const AdmZip = require('adm-zip'); const IconWallet = require('../icon-js/wallet.js'); const utils = require('../icon-js/utils.js'); const STG = require('./stg.js') const ACT = require('./act.js') /** * Class representing a STAYGE Wallet */ class Wallet { /** * Factory method to create a new wallet with a newly generated private key * @return {Wallet} */ static create() { return new Wallet(IconWallet.create()); } /** * Factory method to create a wallet from the specified private key * @param {String} privateKeyString * @return {Wallet} */ static fromPrivateKey(privateKeyString) { return new Wallet(IconWallet.fromPrivateKey(privateKeyString)); } /** * Factory method to create a wallet from the keystore object * @param {Object|String} keyStoreObj * @param {String} password * @return {Wallet} */ static fromKeyStoreObj(keyStoreObj, password) { return new Wallet(IconWallet.fromKeyStoreObj(keyStoreObj, password)); } /** * Factory method to create a wallet from the keystore file * @param {String} keyStorePath * @param {String} password * @return {Wallet} */ static fromKeyStoreFile(keyStorePath, password) { const content = fs.readFileSync(keyStorePath); const keyStoreObj = JSON.parse(content); return new Wallet(IconWallet.fromKeyStoreObj(keyStoreObj, password)); } /** * Create a Wallet * @param {Object} baseWallet underlying wallet object */ constructor(baseWallet) { this._baseWallet = baseWallet; } /** * Return STG score object with the specified score address * @param {String} scoreAddress address of score * @return {STG} score object of STG */ stg(scoreAddress) { return new STG(this, scoreAddress) } /** * Return ACT socre object with the specified score address * @param {String} scoreAddress address of score * @return {ACT} score object of ACT */ act(scoreAddress) { return new ACT(this, scoreAddress) } /** * Get the private key of the wallet * @return {Buffer} */ getPrivateKey() { return this._baseWallet.getPrivateKey(); } /** * Get the private key string of the wallet * @return {String} */ getPrivateKeyString() { return this._baseWallet.getPrivateKeyString(); } /** * Get a public key of the wallet * @return {Buffer} */ getPublicKey() { return this._baseWallet.getPublicKey(); } /** * Get a public key string of the wallet * @return {String} */ getPublicKeyString() { return this._baseWallet.getPublicKeyString(); } /** * Get the wallet address * @return {Buffer} */ getAddress() { return this._baseWallet.getAddress(); } /** * Get the wallet address string * @return {String} */ getAddressString() { return this._baseWallet.getAddressString(); } /** * Convert a wallet to key store object * @param {String} password password for the wallet * @return {Object} */ toKeyStoreObj(password) { return this._baseWallet.toKeyStoreObj(password); } /** * set endpoint * @param {String} name 'mainnet' | 'testnet' */ setEndPoint(name) { return this._baseWallet.setEndPoint(name); } /** * get endpoint * @return {String} endpoint information */ getEndPoint() { return this._baseWallet.getEndPoint(); } /** * Get block information by height * @param {Number|String} height height of block * @return {Promise&lt;Object&gt;} block information */ async getBlockByHeight(height) { return this._baseWallet.getBlockByHeight(height); } /** * Get block information by hash * @param {String} height hash of block * @return {Promise&lt;Object&gt;} block information */ async getBlockByHash(hash) { return this._baseWallet.getBlockByHash(hash); } /** * Get a last block information * @return {Promise&lt;Object&gt;} block information */ async getLastBlock() { return this._baseWallet.getLastBlock(); } /** * Get balance of the wallet * @return {Promise&lt;String&gt;} balance of the wallet owner */ async getBalance() { return this._baseWallet.getBalance(); } /** * Get total supply of ICX * @return {Promise&lt;String&gt;} total supply of underlying network */ async getTotalSupply() { return this._baseWallet.getTotalSupply(); } /** * Transfer coins * @param {String} to address of recipient * @param {Number} value value to transfer * @return {Promise&lt;String&gt;} hash of transaction */ async transferCoin(to, value) { return this._baseWallet.transferICX(to, value); } /** * Transafer a message * @param {String} to address of recipent * @param {String} msg message to transfer * @return {Promise&lt;String&gt;} hash of transaction */ async transferMessage(to, msg) { return this._baseWallet.transferMessage( to, msg.length &gt; 0 ? utils.convertToHex(msg) : msg ); } /** * Send a transaction for calling a smart contract's method * @param {String} contractAddress * @param {String} contractMethod * @param {Object} methodParams * @return {Promise&lt;String&gt;} hash of transacgtion */ async callContractTx( contractAddress, contractMethod, methodParams ) { return this._baseWallet.callScoreTx(contractAddress, contractMethod, methodParams); } /** * Install a smart contract on the underlying blockchain * @param {String} contractPath * @param {Object} installParams * @return {Promise&lt;String&gt;} txHash */ async installContract(contractPath, installParams) { const zip = new AdmZip(contractPath); const contractContent = '0x' + zip.toBuffer().toString('hex'); return this._baseWallet.installScore(contractContent, installParams); } /** * Update the smart contract on the underlying blockchain * @param {type} contractAddress * @param {type} contractPath * @param {type} updateParams * @return {Promise&lt;String&gt;} txHash */ async updateContract( contractAddress, contractPath, updateParams ) { const zip = new AdmZip(contractPath); const contractContent = '0x' + zip.toBuffer().toString('hex'); return this._baseWallet.updateScore(contractAddress, contractContent, updateParams); } /** * Call a smart contract's external function for querying * @param {String} to * @param {String} method * @param {Object} params * @return {Promise&lt;String&gt;} */ async call(to, method, params) { return this._baseWallet.call(to, method, params); } /** * Get the smart contract's external API list * @param {String} address * @return {Promise&lt;Object&gt;} */ async getContractApi(address) { return this._baseWallet.getScoreApi(address); } /** * Get the transaction result requested by transaction hash * @param {String} txHash * @param {Number} timeout seconds to timeout. if not specified, it will be set to the default value of 0 * @return {Promise&lt;Object&gt;} */ async getTransactionResult(txHash, timeout=0) { const SLEEP_UNIT = 500; let loopcnt = 0; let i = 0; timeout = timeout || 0; loopcnt = (timeout === 0) ? 1 : (timeout * 1000 / SLEEP_UNIT); for (i = 0; i &lt; loopcnt; i++) { try { const txResult = await this._baseWallet.getTransactionResult(txHash) return txResult; } catch (err) { //console.log(`getTransactionResult = ${err.message}`); if (err.message.indexOf('Pending') !== -1 || err.message.indexOf('Invalid params txHash') !== -1) { await utils.sleep(500); } else { throw err; } } } throw new Error(`The transaction of ${txHash} is pending`); } /** * Get the transaction information by txHash * @param {String} txHash * @return {Promise&lt;Object&gt;} */ async getTransactionByHash(txHash) { return this._baseWallet.getTransactionByHash(txHash); } } /** @type {Wallet} */ module.exports = Wallet; Ã— Search results Close "},"wallet_act.js.html":{"id":"wallet_act.js.html","title":"Source: wallet/act.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: wallet/act.js /** * Provides smart contract APIs for ACT * @module stayge-wallet/act */ 'use strict' const utils = require('../icon-js/utils.js'); /** * Class representing the ACT smart contract */ class ACT { /** * Create a ACT * @param {Wallet} wallet * @param {String} scoreAddress contract address of ACT */ constructor(wallet, scoreAddress) { this._wallet = wallet; this._scoreAddress = scoreAddress; } /** * Returns name * @return {Promise&lt;String&gt;} */ async name() { const name = await this._wallet.call( this._scoreAddress, 'name', {} ); return name; } /** * Returns symbol * @return {Promise&lt;String&gt;} */ async symbol() { const symbol = await this._wallet.call( this._scoreAddress, 'symbol', {} ); return symbol; } /** * Returns decimals * @return {Promise&lt;Number&gt;} */ async decimals() { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return utils.toBigNumber(decimals).toNumber(); } /** * Returns total supply * @return {Promise&lt;Number&gt;} */ async totalSupply() { const [totalSupply, decimals] = await Promise.all([ this._wallet.call( this._scoreAddress, 'totalSupply', {} ), this._wallet.call( this._scoreAddress, 'decimals', {} ) ]); return utils .toBigNumber(totalSupply) .dividedBy(10 ** utils.toBigNumber(decimals)) .toNumber(); } /** * Returns balance of ACT for the specified owner * @param {String} owner address of owner * @return {Promise&lt;Number&gt;} */ async balanceOf(owner) { owner = owner || this._wallet.getAddressString(); const [balance, decimals] = await Promise.all([ this._wallet.call( this._scoreAddress, 'balanceOf', {_owner: owner} ), this._wallet.call( this._scoreAddress, 'decimals', {} ) ]); return utils .toBigNumber(balance) .dividedBy(10 ** utils.toBigNumber(decimals)) .toNumber(); } /** * Transfer ACT to the specified recipient * @param {String} to address of the recipient * @param {Number} value the amount to transfer * @param {String} data optional * @return {Promise&lt;String&gt;} txHash */ async transfer(to, value, data='') { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'transfer', { _to: to, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), _data: data.length &gt; 0 ? utils.convertToHex(data) : data, } ); } /** * Returns allowance of the spender for the owner balance * @param {String} owner address of the owner * @param {String} spender address of the spender * @return {Promise&lt;Number&gt;} */ async allowance(owner, spender) { const [allowance, decimals] = await Promise.all([ this._wallet.call( this._scoreAddress, 'allowance', {_owner: owner, _spender: spender} ), this._wallet.call( this._scoreAddress, 'decimals', {} ) ]); return utils .toBigNumber(allowance) .dividedBy(10 ** utils.toBigNumber(decimals)) .toNumber(); } /** * Approve spender to transfer the specified ACT from the owner's balance * @param {String} spender address of the spender * @param {Number} value ACT amount to approve * @return {Promise&lt;String&gt;} txHash */ async approve(spender, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'approve', { _spender: spender, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Increase allowance of the spender for the owner's balance * @param {String} spender address of the spender * @param {Number} value ACT amount to increase * @return {Promise&lt;String&gt;} txHash */ async incAllowance(spender, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'inc_allowance', { _spender: spender, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Decrease allowance of the spender for the owner's balance * @param {String} spender address of the spender * @param {Number} value ACT amount to decrease * @return {Promise&lt;String&gt;} txHash */ async decAllowance(spender, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'dec_allowance', { _spender: spender, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Tranfer ACT from sender to recipient * Only the amount of allowance from sender can be tranferred * @param {String} from address of the sender * @param {String} to address of the recipient * @param {Number} value ACT amount to transfer * @return {Promise&lt;String&gt;} txHash */ async transferFrom(from, to, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'transfer_from', { _from: from, _to: to, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Mint tokens and allocate to the specified recipient * @param {String} to address of the recipient * @param {Number} amount amount to mint * @return {Promise&lt;String&gt;} txHash */ async mint(to, amount) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'mint', { _to: to, _amount: utils.toHexString( utils.toBigNumber(amount).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Burn tokens * @param {Number} amount amount to burn * @return {Promise&lt;String&gt;} txHash */ async burn(amount) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'burn', { _amount: utils.toHexString( utils.toBigNumber(amount).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Pause contract to disable it's functionalities * @return {Promise&lt;String&gt;} txHash */ async pause() { return this._wallet.callContractTx( this._scoreAddress, 'pause', ); } /** * Unpause contract to enable it's functionalities * @return {Promise&lt;String&gt;} txHash */ async unpause() { return this._wallet.callContractTx( this._scoreAddress, 'unpause', ); } /** * Returns whether the contract is paused or not * @return {Promise&lt;Bool&gt;} true: paused, false: unpaused */ async paused() { const paused = await this._wallet.call( this._scoreAddress, 'paused', {} ); if (paused === '0x1') { return true; } else { return false; } } /** * set/unset blacklist * @param {String} account address to be set/unset as blacklist * @param {Bool} flag true:set, false:unset * @return {Promise&lt;String&gt;} txHash */ async setBlacklist(account, flag) { return this._wallet.callContractTx( this._scoreAddress, 'set_blacklist', { _account: account, _value:utils.toHexString(flag ? 1 : 0) } ); } /** * set/unset whitelist * @param {String} account address to be set/unset as whitelist * @param {Bool} flag true:set, false:unset * @return {Promise&lt;String&gt;} txHash */ async setWhitelist(account, flag) { return this._wallet.callContractTx( this._scoreAddress, 'set_whitelist', { _account: account, _value:utils.toHexString(flag ? 1 : 0) } ); } } /** @type {ACT} */ module.exports = ACT; Ã— Search results Close "},"icon-js_jsonrpc.js.html":{"id":"icon-js_jsonrpc.js.html","title":"Source: icon-js/jsonrpc.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: icon-js/jsonrpc.js /** * Provides APIs for jsonrpc of ICON * @module stayge-wallet/icon-js/jsonrpc */ 'use strict' const API_VERSION = require('./config.js').apiVersion; const request = require('request'); const utils = require('./utils.js'); const crypto = require('crypto'); /** * Return prefix string of current api version * @return {String} */ function getCurrentApiPrefix() { return '/api/v' + API_VERSION; } /** * Return payload for json rpc 2.0 * @param {String} method * @param {Object} params * @return {Object} */ function toPayload(method, params) { const payload = { jsonrpc: '2.0', id: crypto.randomBytes(4).readUInt32BE(0, true), method: method, } if (params) { payload.params = params; } return payload; } /** * Make a request via json rpc * @param {String} url * @param {Object} payload * @return {Promise&lt;Object&gt;} */ async function requestJsonRpc(url, payload) { const opts = { url: url, method: 'POST', headers:{ 'Content-type': 'application/json' }, body: payload, json: true }; return new Promise(function(resolve, reject) { request(opts, function(err, res, body) { if (err) reject(err); //console.log(`opts=${JSON.stringify(opts)}`) //console.log(`body=${body}`) //console.log(`payload.id=${payload.id} body.id=${body.id}`) //console.log(`err=${err} opts.body=${opts.body} body=${body}`) if (!body || opts.body.id !== body.id) { reject(new Error('The response id is not equal to the request id')) } resolve(body); }); }); } module.exports = { /** * Get a balance of the address * @param {String} address * @param {String} endpoint * @return {Promise&lt;String&gt;} balance */ async getBalance(address, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getBalance', { address : address } ); const body = await requestJsonRpc(url, payload); const result = body.result; if (!result) { throw new Error(JSON.stringify(body)); } return utils.convertToIcx(result); }, /** * Get a block information by height * @param {Number} height * @param {String} endpoint * @return {Promise&lt;Object&gt;} */ async getBlockByHeight(height, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getBlockByHeight', { height : utils.toHexString(height) } ); //console.log('payload = ' + JSON.stringify(payload)); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * Get a block information by hash * @param {String} hash * @param {String} endpoint * @return {Promise&lt;Object&gt;} */ async getBlockByHash(hash, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getBlockByHash', { hash : utils.toHashString(hash) } ); //console.log('payload = ' + JSON.stringify(payload)); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * Get a last block information * @param {String} endpoint * @return {Promise&lt;Object&gt;} */ async getLastBlock(endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getLastBlock', null ); //console.log(`getLastBlock : url=${url} payload = ${JSON.stringify(payload)}`); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * Send a transaction * @param {Object} rawTx [description] * @param {String} endpoint [description] * @return {Promise&lt;String&gt;} transaction hash */ async sendTransaction(rawTx, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_sendTransaction', rawTx ); //console.log(JSON.stringify(payload)) const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * Get the transaction result requested by transaction hash * @param {String} txHash * @param {String} endpoint * @return {Promise&lt;Object&gt;} */ async getTransactionResult(txHash, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getTransactionResult', { txHash : utils.toHashString(txHash) } ); //console.log('payload = ' + JSON.stringify(payload)); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * Get the transaction information by txHash * @param {String} txHash * @param {String} endpoint * @return {Promise&lt;Object&gt;} transaction information */ async getTransactionByHash(txHash, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getTransactionByHash', { txHash : utils.toHashString(txHash) } ); //console.log('payload = ' + JSON.stringify(payload)); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * Get total supply of ICX * @param {String} endpoint * @return {Promise&lt;String&gt;} total supply */ async getTotalSupply(endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getTotalSupply', null ); const body = await requestJsonRpc(url, payload); const result = body.result; if (!result) { throw new Error(JSON.stringify(body)); } return utils.convertToIcx(result); }, /** * Return score api * @param {String} address * @param {String} endpoint * @return {Promise&lt;Object&gt;} */ async getScoreApi(address, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getScoreApi', { address: address } ); //console.log('payload = ' + JSON.stringify(payload)); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * call SCORE's external function * @param {Object} params * @param {String} endpoint * @return {Promise&lt;String&gt;} */ async call(params, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_call', params ); //console.log('payload = ' + JSON.stringify(payload)); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, }; Ã— Search results Close "},"icon-js_key.js.html":{"id":"icon-js_key.js.html","title":"Source: icon-js/key.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: icon-js/key.js /** * Provides key related functions for ICON * @module stayge-wallet/icon-js/key */ 'use strict' const crypto = require('crypto'); const secp256k1 = require('secp256k1'); const sha3_256 = require('js-sha3').sha3_256; const keccak256 = require('js-sha3').keccak256; const scrypt = require('scrypt.js'); const uuidv4 = require('uuid/v4'); module.exports = { /** * Generate a new private key * @return {Buffer} */ generatePrivateKey() { return crypto.randomBytes(32); }, /** * @param {Buffer} privateKey * @return {Buffer} */ privateToPublic(privateKey) { return secp256k1.publicKeyCreate(privateKey, false).slice(1); }, /** * @param {Buffer} publicKey * @return {Buffer} */ publicToAddress(publicKey) { return Buffer.from(sha3_256(publicKey), 'hex').slice(-20); }, /** * Get a private key from the key store object * @param {Object} keyStoreObj * @param {string} password * @return {Buffer} private key */ privateKeyFromKeyStoreObj(keyStoreObj, password) { let derivedKey; if (typeof keyStoreObj !== 'object') { throw new Error('keyStoreObj type should be Object.'); } if (typeof password !== 'string') { throw new Error('password type should be string.'); } if (keyStoreObj.version !== 3) { throw new Error('keySotreObj is not a V3 wallet'); } if (keyStoreObj.crypto.kdf === 'scrypt') { const kdfparams = keyStoreObj.crypto.kdfparams; derivedKey = scrypt( Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen ) } else if (keyStoreObj.crypto.kdf === 'pbkdf2') { const kdfparams = keyStoreObj.crypto.kdfparams; if (kdfparams.prf !== 'hmac-sha256') { throw new Error('Unsupported parameters to PBKDF2'); } derivedKey = crypto.pbkdf2Sync( Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.c, kdfparams.dklen, 'sha256' ); } else { throw new Error('Unsupported key derivation function.'); } const ciphertext = Buffer.from( keyStoreObj.crypto.ciphertext, 'hex' ); const mac = keccak256(Buffer.concat([derivedKey.slice(16, 32), ciphertext])); /* console.log('mac = ' + mac); console.log('crypto.mac = ' + keyStoreObj.crypto.mac); */ if (mac !== keyStoreObj.crypto.mac) { throw new Error('Failed to derive a key'); } const decipher = crypto.createDecipheriv( keyStoreObj.crypto.cipher, derivedKey.slice(0, 16), Buffer.from( keyStoreObj.crypto.cipherparams.iv, 'hex' ) ); return Buffer.concat([ decipher.update(ciphertext), decipher.final() ]); }, /** * Return a keystore object from the wallet information * @param {Buffer} privateKey * @param {String} address * @param {String} password * @param {Object} options * @return {Object} keystore object */ toKeyStoreObj(privateKey, address, password, options) { options = options || {}; const opts = { salt: options.salt || crypto.randomBytes(32), iv: options.iv || crypto.randomBytes(16), kdf: options.kdf || 'scrypt', dklen: options.dklen || 32, c: options.c || 262144, prf: 'hmac-sha256', n: options.n || 262144, r: options.r || 8, p: options.p || 1, cipher: options.cipher || 'aes-128-ctr', uuid: options.uuid || crypto.randomBytes(16) }; const kdfparams = { dklen: opts.dklen, salt: opts.salt.toString('hex') }; let derivedKey; if (opts.kdf === 'pbkdf2') { kdfparams.c = opts.c; kdfparams.prf = opts.prf; derivedKey = crypto.pbkdf2Sync( Buffer.from(password), opts.salt, opts.c, opts.dklen, 'sha256' ); } else if (opts.kdf === 'scrypt') { kdfparams.n = opts.n; kdfparams.r = opts.r; kdfparams.p = opts.p; derivedKey = scrypt( Buffer.from(password), opts.salt, kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen ); } else { throw new Error('Unsupported kdf.'); } const cipher = crypto.createCipheriv( opts.cipher, derivedKey.slice(0, 16), opts.iv ); if (!cipher) { throw new Error('Unsupported cipher'); } const ciphertext = Buffer.concat( [cipher.update(privateKey), cipher.final()] ); const mac = keccak256( Buffer.concat( [derivedKey.slice(16, 32), Buffer.from(ciphertext, 'hex')] ) ); return { version: 3, id: uuidv4({ random: opts.uuid }), address: address, crypto: { ciphertext: ciphertext.toString('hex'), cipherparams: { iv: opts.iv.toString('hex') }, cipher: opts.cipher, kdf: opts.kdf, kdfparams: kdfparams, mac: mac }, coinType: 'icx' } }, }; Ã— Search results Close "},"icon-js_tx.js.html":{"id":"icon-js_tx.js.html","title":"Source: icon-js/tx.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: icon-js/tx.js /** * Provides transaction related functions for ICON * @module stayge-wallet/icon-js/tx */ 'use strict' const secp256k1 = require('secp256k1'); const sha3_256 = require('js-sha3').sha3_256; const BigNumber = require('bignumber.js'); const utils = require('./utils.js'); const config = require('./config.js'); var nonce = 1; /** * Generate a hash key for transaction * @param {Object} obj * @return {String} */ function generateHashKey(obj){ let resultStrReplaced = '' let resultStr = serializeObj(obj); resultStrReplaced = resultStr .substring(1) .slice(0, -1); //console.log('resultStr :' + resultStr); //console.log('resultStrReplaced:' + resultStrReplaced); const result = 'icx_sendTransaction.' + resultStrReplaced; return result; } /** * Serialize a object for transaction * @param {Object} obj * @return {String} */ function serializeObj(obj) { //console.log(obj) let result = ''; result += '{'; let keys; keys = Object.keys(obj); keys.sort(); for(let i=0;i&lt;keys.length;i++){ const key = keys[i] const value = obj[key]; switch(true) { case (value === null) : { result +=`${key}.`; result += String.raw`\\0`; break; } case (typeof value === 'string') : { result += `${key}.` result += escapeString(value) break; } case (Array.isArray(value)) : { result+= `${key}.` result += serializeArray(value) break; } case (typeof value === 'object') : { result+= `${key}.` result += serializeObj(value); break; } default: break; } result += '.' } result = result.slice(0, -1); result += '}'; return result; } /** * Serialize a array for transaction * @param {Array} arr * @return {String} */ function serializeArray(arr) { let result = ''; result += '['; for(let j=0;j&lt;arr.length;j++) { const value = arr[j]; switch(true) { case (value === null) : { result += String.raw`\\0`; break; } case (typeof value === 'string') : { result += escapeString(value) break; } case (Array.isArray(value)) : { result += serializeArray(value) break; } case (typeof value === 'object') : { result += serializieObj(value); break; } default: break; } result += '.' } result = result.slice(0, -1); result += ']'; return result; } /** * Escape a string for transaction * @param {String} value * @return {String} */ function escapeString(value) { let newString = String.raw`${value}`; newString = newString.replace('\\\\', '\\\\\\\\'); newString = newString.replace('.', '\\\\.'); newString = newString.replace('{', '\\\\{'); newString = newString.replace('}', '\\\\}'); newString = newString.replace('[', '\\\\['); newString = newString.replace(']', '\\\\]'); return newString } /** * Concatenate two typed arrays * @param {TypedArray} a * @param {TypedArray} b * @return {Buffer} */ function concatTypedArrays(a, b) { // a, b TypedArray of same type const c = Buffer.alloc(a.length + b.length); //var c = new (a.constructor)(a.length + b.length); c.set(a, 0); c.set(b, a.length); return c; } module.exports = { /** * Make a raw transaction for ICX * @param {Object} data * @param {String} nid * @return {Object} */ makeIcxRawTx(data, nid) { const rawTx = { from: data.from, to: data.to, version: utils.toHexString(config.apiVersion), nid: nid, stepLimit: utils.toHexString( new BigNumber(data.stepLimit).toString(16) ), timestamp: utils.toHexString( ((new Date()).getTime() * 1000).toString(16) ), nonce: utils.toHexString(nonce++) }; if (data.value) { const sendAmount = utils.convertToLoop(data.value); rawTx.value = utils.toHexString(sendAmount); } if (data.dataType) { rawTx.dataType = data.dataType; rawTx.data = data.data; } return rawTx; }, /** * Sign a raw transaction * @param {Buffer} privateKey * @param {Object} rawTx * @return {Object} */ signRawTx(privateKey, rawTx) { const phraseToSign = generateHashKey(rawTx); const hashcode = sha3_256.update(phraseToSign).hex(); const message = Buffer.from(hashcode, 'hex'); const sign = secp256k1.sign(message, privateKey); const recovery = new Uint8Array(1); recovery[0] = sign.recovery; const signature = concatTypedArrays(sign.signature, recovery); const b64encoded = signature.toString('base64'); /* const b64encoded = Buffer.from( String.fromCharCode.apply(null, signature) ).toString('base64'); */ const newRawTx = { ...rawTx, signature: b64encoded }; //console.log('newRawTx: ' + JSON.stringify(newRawTx)); return newRawTx }, }; Ã— Search results Close "},"icon-js_utils.js.html":{"id":"icon-js_utils.js.html","title":"Source: icon-js/utils.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: icon-js/utils.js /** * Provides utility functions * @module stayge-wallet/icon-js/utils */ 'use strict' const BigNumber = require('bignumber.js'); const config = require('./config.js'); module.exports = { /** * Returns true if object is string, otherwise false * @param {Object} object * @return {Boolean} */ isString(object) { return typeof object === 'string' || (object &amp;&amp; object.constructor &amp;&amp; object.constructor.name === 'String'); }, /** * Returns true if object is BigNumber, otherwise false * @param {Object} * @return {Boolean} */ isBigNumber(object) { return (object &amp;&amp; (object instanceof BigNumber || (object.constructor &amp;&amp; object.constructor.name === 'BigNumber'))); }, /** * Transforms into an bignumber * @param {Number|String|BigNumber} a number, string, HEX string or BigNumber * @return {BigNumber} BigNumber */ toBigNumber(number) { number = number || 0; if (this.isBigNumber(number)) return number; if (this.isString(number) &amp;&amp; (number.indexOf('0x') === 0 || number.indexOf('-0x') === 0)) { return new BigNumber(number.replace('0x',''), 16); } return new BigNumber(number.toString(10), 10); }, /** * Convert to icx unit * @param {Number|String|BigNumber} a number, string, HEX string or BigNumber * @return {String} */ convertToIcx(value) { return this.toBigNumber(value) .dividedBy(config.unitIcx) .toString(10); }, /** * Convert to loop unit * @param {Number|String|BigNumber} value * @return {BigNumber} */ convertToLoop(value) { return this.toBigNumber(value).times(config.unitIcx); }, /** * Convert a number to hexadecimal string * @param {Number|String|BigNumber} value * @return {String} */ toHexString(value) { if (typeof value === 'number') { return value &lt; 0 ? '-0x' + value.toString(16).substr(1) : '0x' + value.toString(16); } else if (typeof value === 'string' &amp;&amp; !value.startsWith('0x')) { return '0x' + value.toString(16); } else if (this.isBigNumber(value)) { return value &lt; 0 ? '-0x' + value.toString(16).substr(1) : '0x' + value.toString(16); } else { return value; } }, /** * Convert to hash string leading '0x' * @param {String} value * @return {String} */ toHashString(value) { return value.substring(0, 2) === '0x' ? value : '0x' + value; }, /** * Returns endpoint of the specified name * @param {String} name mainnet | testnet * @return {Object} */ getEndPoint(name) { return config.endpoints[name]; }, /** * Get a endpoint for current environment * @return {String} */ getEndPointFromEnv() { //console.log('NODE_ENV : ' + process.env.NODE_ENV); if (process.env.NODE_ENV === 'production') { return this.getEndPoint('mainnet'); } else { return this.getEndPoint('testnet'); } }, /** * Sleep for the specified time * @param {Number} ms milliseconds * @return {Promise} */ sleep(ms) { return new Promise(resolve =&gt; setTimeout(resolve, ms)); }, /** * Convert string to hexastring * @param {String} str * @return {String} */ convertToHex(str) { let hex = ''; for(let i = 0; i &lt; str.length; i++) { hex += '' + str.charCodeAt(i).toString(16); } return hex; }, }; Ã— Search results Close "},"icon-js_wallet.js.html":{"id":"icon-js_wallet.js.html","title":"Source: icon-js/wallet.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: icon-js/wallet.js /** * ICON wallet module for javascript * @module stayge-wallet/icon-js/wallet */ 'use strict' const key = require('./key.js'); const utils = require('./utils.js'); const jsonrpc = require('./jsonrpc.js'); const tx = require('./tx.js'); const DEFAULT_DEPLOY_STEP_LIMIT = 2000000000; // 20 ICX, step price : 0.00000001 ICX(10 Gloop) const DEFAULT_UPDATE_STEP_LIMIT = 3000000000; // 30 ICX, step price : 0.00000001 ICX(10 Gloop) const DEFAULT_TX_STEP_LIMIT = 100000000; // 1 ICX, step price : 0.00000001 ICX(10 Gloop) /** * Class representing a ICON Wallet */ class Wallet { /** * Factory method to create a new wallet with a newly generated private key * @return {Wallet} */ static create() { return new Wallet(key.generatePrivateKey()); } /** * Factory method to create a wallet from the private key * @param {String} privateKeyString * @return {Wallet} */ static fromPrivateKey(privateKeyString) { return new Wallet(Buffer.from(privateKeyString, 'hex')); } /** * Factory method to create a wallet from the keystore object * @param {Object|string} keyStoreObj [description] * @param {String} password [description] * @return {Wallet} [description] */ static fromKeyStoreObj(keyStoreObj, password) { //console.log('typeof keyStoreObj:'+typeof keyStoreObj); const json = (typeof keyStoreObj === 'object') ? keyStoreObj : JSON.parse(keyStoreObj); return new Wallet(key.privateKeyFromKeyStoreObj( json, password )); } /** * Create a ICON Wallet * @param {Buffer} privateKey - private key for wallet */ constructor(privateKey) { this._privateKey = privateKey; this._publicKey = key.privateToPublic(privateKey); this._address = key.publicToAddress(this._publicKey); this._endpoint = utils.getEndPointFromEnv(); } /** * Get the private key of the wallet * @return {Buffer} */ getPrivateKey() { return this._privateKey; } /** * Get the private key string of the wallet * @return {String} */ getPrivateKeyString() { return this._privateKey.toString('hex'); } /** * Get the public key of the wallet * @return {Buffer} */ getPublicKey() { return this._publicKey; } /** * Get the public key string of the wallet * @return {String} */ getPublicKeyString() { return this._publicKey.toString('hex'); } /** * Get the address of the wallet * @return {Buffer} */ getAddress() { return this._address; } /** * Get the address string of the wallet * @return {String} */ getAddressString() { return 'hx' + this._address.toString('hex'); } /** * Convert the wallet to the keystore object * @param {String} password * @return {Object} */ toKeyStoreObj(password) { return key.toKeyStoreObj( this.getPrivateKey(), this.getAddressString(), password ); } /** * set the endpoint * @param {String} name 'mainnet' | 'testnet' */ setEndPoint(name) { this._endpoint = utils.getEndPoint(name); } /** * get the endpoint * @return {String} uri of endpoint */ getEndPoint() { return this._endpoint; } /** * Get the block information by height * @param {Number|String} height * @return {Promise&lt;Object&gt;} */ async getBlockByHeight(height) { return jsonrpc.getBlockByHeight(height, this.getEndPoint().url); } /** * Get the block information by hash * @param {String} height * @return {Promise&lt;Object&gt;} */ async getBlockByHash(hash) { return jsonrpc.getBlockByHash(hash, this.getEndPoint().url); } /** * Get the last block information * @return {Promise&lt;Object&gt;} */ async getLastBlock() { return jsonrpc.getLastBlock(this.getEndPoint().url); } /** * Get balance of the wallet * @return {Promise&lt;String&gt;} */ async getBalance() { return jsonrpc.getBalance(this.getAddressString(), this.getEndPoint().url); } /** * Get total supply of ICX * @return {Promise&lt;String&gt;} */ async getTotalSupply() { return jsonrpc.getTotalSupply(this.getEndPoint().url); } /** * Transfer ICX coins * @param {String} to * @param {Number} value * @return {Promise&lt;String&gt;} txHash */ async transferICX(to, value) { const data = { from: this.getAddressString(), to: to, stepLimit: DEFAULT_TX_STEP_LIMIT, value: value, }; const rawTx = tx.makeIcxRawTx(data, this.getEndPoint().nid); const rawTxSigned = tx.signRawTx(this.getPrivateKey(), rawTx) const result = await jsonrpc.sendTransaction( rawTxSigned, this.getEndPoint().url ); return result } /** * Transafer a message * @param {String} to * @param {String} msg * @return {Promise&lt;String&gt;} txHash */ async transferMessage(to, msg) { const data = { from: this.getAddressString(), to: to, stepLimit: DEFAULT_TX_STEP_LIMIT, dataType: 'message', data: msg, }; const rawTx = tx.makeIcxRawTx(data, this.getEndPoint().nid); const rawTxSigned = tx.signRawTx(this.getPrivateKey(), rawTx) const result = await jsonrpc.sendTransaction( rawTxSigned, this.getEndPoint().url ); return result } /** * Send a transaction for calling a SCORE'S method * @param {String} scoreAddress * @param {String} scoreMethod * @param {Object} methodParams * @return {Promise&lt;String&gt;} txHash */ async callScoreTx(scoreAddress, scoreMethod, methodParams) { const data = { from: this.getAddressString(), to: scoreAddress, stepLimit: DEFAULT_TX_STEP_LIMIT, dataType: 'call', data: { method: scoreMethod }, }; if (methodParams) { data.data.params = methodParams; } const rawTx = tx.makeIcxRawTx(data, this.getEndPoint().nid); const rawTxSigned = tx.signRawTx(this.getPrivateKey(), rawTx) const result = await jsonrpc.sendTransaction( rawTxSigned, this.getEndPoint().url ); return result } /** * Install a SCORE on the ICON blockchain * @param {String} scoreContent * @param {Object} installParams * @return {Promise&lt;String&gt;} txHash */ async installScore(scoreContent, installParams) { const data = { from: this.getAddressString(), to: 'cx0000000000000000000000000000000000000000', // address 0 means SCORE install stepLimit: DEFAULT_DEPLOY_STEP_LIMIT, dataType: 'deploy', data: { contentType: 'application/zip', content: scoreContent, }, }; if (installParams) { data.data.params = installParams; } const rawTx = tx.makeIcxRawTx(data, this.getEndPoint().nid); const rawTxSigned = tx.signRawTx(this.getPrivateKey(), rawTx) const result = await jsonrpc.sendTransaction( rawTxSigned, this.getEndPoint().url ); return result } /** * Update the SCORE on the ICON blockchain * @param {String} scoreAddress address of score * @param {String} scoreContent score contents of hexstring format * @param {Object} updateParams parameter for update * @return {Promise&lt;String&gt;} */ async updateScore(scoreAddress, scoreContent, updateParams) { const data = { from: this.getAddressString(), to: scoreAddress, stepLimit: DEFAULT_UPDATE_STEP_LIMIT, dataType: 'deploy', data: { contentType: 'application/zip', content: scoreContent, }, }; if (updateParams) { data.data.params = updateParams; } const rawTx = tx.makeIcxRawTx(data, this.getEndPoint().nid); const rawTxSigned = tx.signRawTx(this.getPrivateKey(), rawTx) const result = await jsonrpc.sendTransaction( rawTxSigned, this.getEndPoint().url ); return result } /** * Call SCORE's external function * @param {String} to * @param {String} method * @param {Object} params * @return {Promise&lt;String&gt;} */ async call(to, method, params) { const data = { from: this.getAddressString(), to: to, dataType: 'call', data: { method: method, params: params } }; const result = await jsonrpc.call( data, this.getEndPoint().url ); return result } /** * Get the SCORE's external API list * @param {String} address * @return {Promise&lt;Object&gt;} */ async getScoreApi(address) { return jsonrpc.getScoreApi(address, this.getEndPoint().url); } /** * Get the transaction result with the specified txHash * @param {String} txHash * @return {Promise&lt;Object&gt;} */ async getTransactionResult(txHash) { return jsonrpc.getTransactionResult(txHash, this.getEndPoint().url); } /** * Get the transaction information by txHash * @param {String} txHash * @return {Promise&lt;Object&gt;} */ async getTransactionByHash(txHash) { return jsonrpc.getTransactionByHash(txHash, this.getEndPoint().url); } } /** @type {Wallet} */ module.exports = Wallet; Ã— Search results Close "},"wallet_stg.js.html":{"id":"wallet_stg.js.html","title":"Source: wallet/stg.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: wallet/stg.js /** * Provides smart contract APIs for STG * @module stayge-wallet/stg */ 'use strict' const utils = require('../icon-js/utils.js'); /** * Class representing the STG smart contract */ class STG { /** * Create a STG * @param {Wallet} wallet * @param {String} scoreAddress contract address of STG */ constructor(wallet, scoreAddress) { this._wallet = wallet; this._scoreAddress = scoreAddress; } /** * Returns name * @return {Promise&lt;String&gt;} */ async name() { const name = await this._wallet.call( this._scoreAddress, 'name', {} ); return name; } /** * Returns symbol * @return {Promise&lt;String&gt;} */ async symbol() { const symbol = await this._wallet.call( this._scoreAddress, 'symbol', {} ); return symbol; } /** * Returns decimals * @return {Promise&lt;Number&gt;} */ async decimals() { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return utils.toBigNumber(decimals).toNumber(); } /** * Returns total supply * @return {Promise&lt;Number&gt;} */ async totalSupply() { const [totalSupply, decimals] = await Promise.all([ this._wallet.call( this._scoreAddress, 'totalSupply', {} ), this._wallet.call( this._scoreAddress, 'decimals', {} ) ]); return utils .toBigNumber(totalSupply) .dividedBy(10 ** utils.toBigNumber(decimals)) .toNumber(); } /** * Returns balance of STG for the specified owner * @param {String} owner address of owner * @return {Promise&lt;Number&gt;} */ async balanceOf(owner) { owner = owner || this._wallet.getAddressString(); const [balance, decimals] = await Promise.all([ this._wallet.call( this._scoreAddress, 'balanceOf', {_owner: owner} ), this._wallet.call( this._scoreAddress, 'decimals', {} ) ]); return utils .toBigNumber(balance) .dividedBy(10 ** utils.toBigNumber(decimals)) .toNumber(); } /** * Transfer STG to the specified recipient * @param {String} to address of the recipient * @param {Number} value the amount to transfer * @param {String} data optional * @return {Promise&lt;String&gt;} txHash */ async transfer(to, value, data='') { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'transfer', { _to: to, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), _data: data.length &gt; 0 ? utils.convertToHex(data) : data, } ); } /** * Returns allowance of the spender for the owner balance * @param {String} owner address of the owner * @param {String} spender address of the spender * @return {Promise&lt;Number&gt;} */ async allowance(owner, spender) { const [allowance, decimals] = await Promise.all([ this._wallet.call( this._scoreAddress, 'allowance', {_owner: owner, _spender: spender} ), this._wallet.call( this._scoreAddress, 'decimals', {} ) ]); return utils .toBigNumber(allowance) .dividedBy(10 ** utils.toBigNumber(decimals)) .toNumber(); } /** * Approve spender to transfer the specified STG from the owner's balance * @param {String} spender address of the spender * @param {Number} value STG amount to approve * @return {Promise&lt;String&gt;} txHash */ async approve(spender, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'approve', { _spender: spender, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Increase allowance of the spender for the owner's balance * @param {String} spender address of the spender * @param {Number} value STG amount to increase * @return {Promise&lt;String&gt;} txHash */ async incAllowance(spender, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'inc_allowance', { _spender: spender, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Decrease allowance of the spender for the owner's balance * @param {String} spender address of the spender * @param {Number} value STG amount to decrease * @return {Promise&lt;String&gt;} txHash */ async decAllowance(spender, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'dec_allowance', { _spender: spender, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Tranfer STG from sender to recipient * Only the amount of allowance from sender can be tranferred * @param {String} from address of the sender * @param {String} to address of the recipient * @param {Number} value STG amount to transfer * @return {Promise&lt;String&gt;} txHash */ async transferFrom(from, to, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'transfer_from', { _from: from, _to: to, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Mint tokens and allocate to the contract owner * @param {Number} amount amount to mint * @return {Promise&lt;String&gt;} txHash */ async mint(amount) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'mint', { _amount: utils.toHexString( utils.toBigNumber(amount).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Burn tokens * @param {Number} amount amount to burn * @return {Promise&lt;String&gt;} txHash */ async burn(amount) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callContractTx( this._scoreAddress, 'burn', { _amount: utils.toHexString( utils.toBigNumber(amount).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Pause contract to disable it's functionalities * @return {Promise&lt;String&gt;} txHash */ async pause() { return this._wallet.callContractTx( this._scoreAddress, 'pause', ); } /** * Unpause contract to enable it's functionalities * @return {Promise&lt;String&gt;} txHash */ async unpause() { return this._wallet.callContractTx( this._scoreAddress, 'unpause', ); } /** * Returns whether the contract is paused or not * @return {Promise&lt;Bool&gt;} true: paused, false: unpaused */ async paused() { const paused = await this._wallet.call( this._scoreAddress, 'paused', {} ); if (paused === '0x1') { return true; } else { return false; } } /** * set/unset blacklist * @param {String} account address to be set/unset as blacklist * @param {Bool} flag true:set, false:unset * @return {Promise&lt;String&gt;} txHash */ async setBlacklist(account, flag) { return this._wallet.callContractTx( this._scoreAddress, 'set_blacklist', { _account: account, _value:utils.toHexString(flag ? 1 : 0) } ); } /** * set/unset whitelist * @param {String} account address to be set/unset as whitelist * @param {Bool} flag true:set, false:unset * @return {Promise&lt;String&gt;} txHash */ async setWhitelist(account, flag) { return this._wallet.callContractTx( this._scoreAddress, 'set_whitelist', { _account: account, _value:utils.toHexString(flag ? 1 : 0) } ); } } /** @type {STG} */ module.exports = STG; Ã— Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Modules Classes ACT Wallet STG Wallet Ã— Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Classes Classes ACT Wallet STG Wallet Ã— Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet stayge-wallet 1.0.0 STAYGE Wallet API for NodeJSThis is the STAYGE Wallet API for NodeJs providing several features such as creating a wallet, retrieving block/transaction information on the blockchain, making a transaction for transfering coins and interacting with smart contracts for the STAYGE services. Currently, the STAYGE wallet is supporting only the ICON as an underlying blockchain network. To interface with the ICON network, it implemented the NodeJs version of the ICON SDK(python, java) based on the ICON JSON-RPC specification. In the future, the STAYGE Network will be provided for the STAYGE services. Table of Contents Installation Usage Create a wallet with newly generated keys Create a wallet from the private key Create a wallet from the keystore file Convert a wallet to the keystore json object Retrieve the block/transaction information on the blockchain Make transactions for the coin transfer and sending a message Deploy and update a smart contract on the blockchain Interface with the smart contract of the ACT token Interface with the smart contract of the STG token API Reference License Installation# npm npm install stayge-wallet # yarn yarn add stayge-walletUsageCreate a wallet with newly generated keys const Wallet = require('stayge-wallet'); const wallet = Wallet.create(); console.log(wallet.getPrivateKeyString()); // 7d716d0ddd7b5d567aa7296f8a9f5e11be0127c1da726047d1f6f48380ca0778 console.log(wallet.getAddressString()); // hx22e9d89e560f225271d2fb912774e364f8c25a6c console.log(wallet.getPublicKeyString()); // 482dffbef9c029df3162580407cf3f355f1937f6a31e61744afe61f8eb11a274615d5c305478b35a325e38806e7ce6d2cd936a0f39676b3725727ea01ed5e091Create a wallet from the private key const Wallet = require('stayge-wallet'); const wallet = Wallet.fromPrivateKey('7d716d0ddd7b5d567aa7296f8a9f5e11be0127c1da726047d1f6f48380ca0778'); console.log(wallet.getPrivateKeyString()); // 7d716d0ddd7b5d567aa7296f8a9f5e11be0127c1da726047d1f6f48380ca0778 console.log(wallet.getAddressString()); // hx22e9d89e560f225271d2fb912774e364f8c25a6c console.log(wallet.getPublicKeyString()); // 482dffbef9c029df3162580407cf3f355f1937f6a31e61744afe61f8eb11a274615d5c305478b35a325e38806e7ce6d2cd936a0f39676b3725727ea01ed5e091Create a wallet from the keystore file const Wallet = require('stayge-wallet'); const password = 'test123!'; const wallet = Wallet.fromKeyStoreFile('./test_user1.keystore', password); console.log(wallet.getPrivateKeyString()); // 3f3a98221b8113c12651542cc3d4103b683bf57472dc1eb3d0e8cf41a0ec97f3 console.log(wallet.getAddressString()); // hx3938461680520062e9fe7e46288d6b74a8682ce7 console.log(wallet.getPublicKeyString()); // 30009a315e8b83acb6a0925e085dd9545ca10e67c846a3c23c8831b429b4be157759a701e2fe848e6d636a787f8ecc942e9bb0d687dcbc3c57d59d47814c5a52Convert a wallet to the keystore json object const Wallet = require('stayge-wallet'); const wallet = Wallet.create(); const password = 'test123'; const keyStoreObj = wallet.toKeyStoreObj(password); // The private key is encrypted with the specified password console.log(keyStoreObj); /* { version: 3, id: '5d76efd9-969e-40fa-bb57-e5c8a9c23000', address: 'hxfa35198e5c39da40f93456de22ac3f71e0dcacae', crypto: { ciphertext: 'fb4f14f295341d3946a25bf65dee510932a2854b11d4a7549f7f315b6fc2f9cb', cipherparams: { iv: '658189e8f4cf9253a203ea504f634c0b' }, cipher: 'aes-128-ctr', kdf: 'scrypt', kdfparams: { dklen: 32, salt: '91c311f31db28459201327c0aee810f1ebcb1c5fac674e056d3610ffc56b18ac', n: 262144, r: 8, p: 1 }, mac: '57520547e0be0c7f8b9ebc5f945c95871f311f13a6ed04c717a62e115b8a115f' }, coinType: 'icx' } */ Retrieve the block/transaction information on the blockchain const Wallet = require('stayge-wallet'); const wallet = Wallet.create(); // get the block information by the block height wallet.getBlockByHeight(1).then((block) =&gt; { console.log(block); }); /* { version: '0.1a', prev_block_hash: '974e2a8fbefad82b30af0ebfd9939314a53cd7ce3c54b19079b59501122987fe', merkle_tree_root_hash: '54d0c9ca9120014a14c1c5cc533c6ec069ceba5910d42ab378758c61a683da12', time_stamp: 1536931246002403, confirmed_transaction_list: [ { version: '0x3', from: 'hx5a05b58a25a1e5ea0f1d5715e1f655dffc1fb30a', to: 'hx670e692ffd3d5587c36c3a9d8442f6d2a8fcc795', value: '0xde0b6b3a7640000', stepLimit: '0x300000', timestamp: '0x575d4aa49cfde', nonce: '0x0', nid: '0x3', signature: 'wwyio63MFxavfSTzsjaxGnhtHKb0hyUYesWYayVZx0cvUXeo7PfMVwTCGmTL2eR+9d+kcTApCv34A4BylbvIHwA=', txHash: '0xfe6a93cc3478570a2e26b7644a893fbfb71c7ca89d0a26bc52e5152ae8a9993a' }, { version: '0x3', from: 'hx5a05b58a25a1e5ea0f1d5715e1f655dffc1fb30a', to: 'hx670e692ffd3d5587c36c3a9d8442f6d2a8fcc795', value: '0xde0b6b3a7640000', stepLimit: '0x300000', timestamp: '0x575d4aa796592', nonce: '0x0', nid: '0x3', signature: '7BopGhKwNqaoMXS0kzwTtaz69LKBlrPhJag4+iuA/PAKq6dGRL8GccR7bIw1NeobM06AHrytNqEu4xBaBcJWewA=', txHash: '0x9eb5dc96873286df12d5b51a7623fa7af73c25bf4ee750a215afaa655eac4c5d' } ], block_hash: '4877db402d4a704bb0152a1e065e5e5feae58a1cb1907ad1505d0a5b819d76dd', height: 1, peer_id: 'hxf64fc9c20c4a5b8c59e999405fbc941a96bc2c00', signature: 'UJ7DfgiZhtkTyKJ3hPITqKFK1mXGNIrHDEAatXVV/ewZpD6mjpGHiva9CB872quJ1ibr7sh8xeuoWYe9e5vvKgE=' } */ // get the block information by the block hash wallet.getBlockByHash( '0x76792ad0da07863ce71949d0c9adf4e6a3e9cfecc5ed8a093fe448aff0529f57' ).then((block) =&gt; { console.log(block); }); /* { version: '0.1a', prev_block_hash: 'a448c6d2b9e2746fc485f7897323bb787fb093d4338f3a12b0d57b375642c407', merkle_tree_root_hash: 'c8ac902521dc3485e9977f2b7764185e3ed7900a1528a226775a89c543a97263', time_stamp: 1537248493777467, confirmed_transaction_list: [ { data: [Object], stepLimit: '0x57878820', signature: 'Yvsx3oiqE63hl+zqg7HzWMq1TWQebI3bdKAXDOozxh81n0mUw6Oq5+iRzfgBjhttrASAZlQluNlduwgreUxRfQE=', dataType: 'deploy', nid: '0x3', from: 'hx54063e2493ba696d9b7fc4d725a93fbf62a26d7e', to: 'cx0000000000000000000000000000000000000000', version: '0x3', nonce: '0x1', timestamp: '0x5761e8e596140', txHash: '0xc8ac902521dc3485e9977f2b7764185e3ed7900a1528a226775a89c543a97263' } ], block_hash: '76792ad0da07863ce71949d0c9adf4e6a3e9cfecc5ed8a093fe448aff0529f57', height: 132, peer_id: 'hxf64fc9c20c4a5b8c59e999405fbc941a96bc2c00', signature: 'lk0LSaOubE7Ks3OpJ/CRpQFup2Hmh2OgK6H30k3ctlZjMSKutP0X1oiusVzgQtd30S6QaI2i7nBo3XrzBSEXXwE=' } */ // get the last block information wallet.getLastBlock().then((block) =&gt; { console.log(block); }); /* { version: '0.1a', prev_block_hash: 'cd3833c26f43bf0cf497696402c2978222fb6a566d0dbca1aea681596e8705f0', merkle_tree_root_hash: 'f84c0b720a0210b0a94ae4a0e30c4428ae331cc8661f23e20e58a1d888b2a207', time_stamp: 1538719697153219, confirmed_transaction_list: [ { from: 'hxca1b18d749e4339e9661061af7e1e6cabcef8a19', to: 'cxe19a9fa4ae93763a1e407c3beef0cd71b63426b9', value: '0xde0b6b3a7640000', version: '0x3', nid: '0x3', stepLimit: '0xf4240', timestamp: '0x5777518eccf48', signature: 'diqziCGY8H/xXZXDWMBzP2JZxNlE1uwZN3ynfaaFMSF8Exvsddqr8QKC3CTf7/2HBdDAuSXVikgQX5Sn/IqW1wA=', txHash: '0xf84c0b720a0210b0a94ae4a0e30c4428ae331cc8661f23e20e58a1d888b2a207' } ], block_hash: '59fb75edd05f0cc2124549358afad25ded6ca7ea6d0ce54bb17083685c8a092d', height: 8337, peer_id: 'hxf64fc9c20c4a5b8c59e999405fbc941a96bc2c00', signature: 'oUlhzp6ocW8KCVbhAxJM/O3d58TNMU3kzWlz7M1umexbV/eirgy4dZyTW8uG2c6T9dxnCXeUpxnp1b1Rn26KqQE=' } */ // get the transaction information by the transaction hash wallet.getTransactionByHash( '0x42fd4496a5346c3d47d7c40a0676be36b3ba6c1616d9f5ef8dac3517f153f2ea' ).then((tx) =&gt; { console.log(tx); }); /* { from: 'hxca1b18d749e4339e9661061af7e1e6cabcef8a19', to: 'cx60e000ed29b9bb258789f64137f17e95aa09b341', value: '0x6124fee993bc0000', version: '0x3', nid: '0x3', stepLimit: '0xf4240', timestamp: '0x577892b675738', signature: 'AXcYaw31ePNgqIuzR7hK8/Mnw19eYB5ss6Fzj4pKb50C4lqCksSvHX8FHAIguN4mG+9H8eaS1FZq+uvD5oDoUQE=', txHash: '0x42fd4496a5346c3d47d7c40a0676be36b3ba6c1616d9f5ef8dac3517f153f2ea', txIndex: '0x0', blockHeight: '0x212f', blockHash: '0x4cd39ac97b042593844ccb5730026f8a7d64e1b3f820b03951a170765f61865a' } */ // get the result of the transaction by the transaction hash wallet.getTransactionResult( '0x42fd4496a5346c3d47d7c40a0676be36b3ba6c1616d9f5ef8dac3517f153f2ea', ).then((txResult) =&gt; { console.log(txResult); }); /* { txHash: '0x42fd4496a5346c3d47d7c40a0676be36b3ba6c1616d9f5ef8dac3517f153f2ea', blockHeight: '0x212f', blockHash: '0x4cd39ac97b042593844ccb5730026f8a7d64e1b3f820b03951a170765f61865a', txIndex: '0x0', to: 'cx60e000ed29b9bb258789f64137f17e95aa09b341', stepUsed: '0x38630', stepPrice: '0x2540be400', cumulativeStepUsed: '0x38630', eventLogs: [ { scoreAddress: 'cx60e000ed29b9bb258789f64137f17e95aa09b341', indexed: [Array], data: [] }, { scoreAddress: 'cx60e000ed29b9bb258789f64137f17e95aa09b341', indexed: [Array], data: [] } ], logsBloom: '0x00000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000050000000000010000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000400000000001040000000000000000000000000000000000000000000000000004000000000044000000000000000000000000000000000000000000000000004000000000002600000000000000000000000000000000000000000000000000340000000000800000000000000000000000000000000000000000000000000000000000000005000000000000', status: '0x1' } */ Make transactions for the coin transfer and sending a message const Wallet = require('stayge-wallet'); const password = 'test123!'; const wallet = Wallet.fromKeyStoreFile('./test_user1.keystore', password); // send 1 icx to the address of 'hxd67aa5101f339e3afd278a9a26bf78d94f1ba802' wallet.transferCoin( 'hxd67aa5101f339e3afd278a9a26bf78d94f1ba802', 1 ).then((txHash) =&gt; { console.log(txHash); // 0xb916be616c2e085bd539a85704f4f61c7902104353dd11c058d87003d87cb5c7 return wallet.getTransactionResult(txHash, 5); // set timeout of 5 sec for the confirmation of the transaction }).then((txResult) =&gt; { console.log(txResult); }); /* { txHash: '0xb916be616c2e085bd539a85704f4f61c7902104353dd11c058d87003d87cb5c7', blockHeight: '0x2411', blockHash: '0x4e64ea8aba8b7141e1a9f608b402f0c2bab96bc202b15eea73bff668ff21c935', txIndex: '0x1', to: 'hxd67aa5101f339e3afd278a9a26bf78d94f1ba802', stepUsed: '0x186a0', stepPrice: '0x2540be400', cumulativeStepUsed: '0x311f0', eventLogs: [], logsBloom: '0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000', status: '0x1' } */ // send a message to the address of 'hxd67aa5101f339e3afd278a9a26bf78d94f1ba802' wallet.transferMessage( 'hxd67aa5101f339e3afd278a9a26bf78d94f1ba802', 'hello!' ).then((txHash) =&gt; { console.log(txHash); // 0x92346d66f69226ecd866666744702c2ad4a1c3fc629de20f62382e0e3f7a3af1 return wallet.getTransactionResult(txHash, 5); // set timeout of 5 sec for the confirmation of the transaction }).then((txResult) =&gt; { console.log(txResult); }); /* { txHash: '0x92346d66f69226ecd866666744702c2ad4a1c3fc629de20f62382e0e3f7a3af1', blockHeight: '0x2411', blockHash: '0x4e64ea8aba8b7141e1a9f608b402f0c2bab96bc202b15eea73bff668ff21c935', txIndex: '0x0', to: 'hxd67aa5101f339e3afd278a9a26bf78d94f1ba802', stepUsed: '0x18b50', stepPrice: '0x2540be400', cumulativeStepUsed: '0x18b50', eventLogs: [], logsBloom: '0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000', status: '0x1' } */Deploy and update a smart contract on the blockchain const Wallet = require('stayge-wallet'); const password = 'test123!'; const wallet = Wallet.fromKeyStoreFile('../test/test_owner.keystore', password); // install a smart contract with the specified zip file wallet.installContract( '../test/act.zip', { name: 'EXO', symbol: 'ACT', initialSupply: '0x0', decimals: '0x12' } ).then((txHash) =&gt; { console.log(txHash); // 0xd817735ae69918b4591eb6d07d2e056a1df8c39e789b77ecc9e1d74330a6dfb9 return wallet.getTransactionResult(txHash, 5); // set timeout of 5 sec for the confirmation of the transaction }).then((txResult) =&gt; { console.log(txResult); }); /* { txHash: '0xd817735ae69918b4591eb6d07d2e056a1df8c39e789b77ecc9e1d74330a6dfb9', blockHeight: '0x243a', blockHash: '0x7799b3d25c34e34bf1295cd4f7792ec84b6c3cced7f4e04fb530b637adf814e8', txIndex: '0x2', to: 'cx0000000000000000000000000000000000000000', scoreAddress: 'cx21d32491358eca916f7cbbbff8ba33b720cf0985', stepUsed: '0x403222c0', stepPrice: '0x2540be400', cumulativeStepUsed: '0x403534b0', eventLogs: [], logsBloom: '0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000', status: '0x1' } */ // update a smart contract of the specified contract address with the zip file wallet.updateContract( 'cx2f7bf7cebd92f15ff9c4aba2a1fd79b6a0529f93', // contract address '../test/act.zip', // The contract sources will be updated to the specified zip files ).then((txHash) =&gt; { console.log(txHash); // 0xb74c0ac85898c22f8f70cef89f78e3cf16878fa086826821d88d29095a5993c9 return wallet.getTransactionResult(txHash, 5); // set timeout of 5 sec for the confirmation of the transaction }).then((txResult) =&gt; { console.log(txResult); }); /* { txHash: '0xb74c0ac85898c22f8f70cef89f78e3cf16878fa086826821d88d29095a5993c9', blockHeight: '0x243a', blockHash: '0x7799b3d25c34e34bf1295cd4f7792ec84b6c3cced7f4e04fb530b637adf814e8', txIndex: '0x3', to: 'cx2f7bf7cebd92f15ff9c4aba2a1fd79b6a0529f93', stepUsed: '0x63f554c0', stepPrice: '0x2540be400', cumulativeStepUsed: '0xa42a8970', eventLogs: [], logsBloom: '0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000', status: '0x1' } */Interface with the smart contract of the ACT token const Wallet = require('stayge-wallet'); const password = 'test123!'; const wallet = Wallet.fromKeyStoreFile('./test_user1.keystore', password); const actKardScoreAddress = 'cx3d85fc30097cb8b18eb52de927b444833c690705'; const act = wallet.act(actKardScoreAddress); // get the name of the ACT act.name().then((name) =&gt; { console.log(name); // KARD }); // get the symbol of the ACT act.symbol().then((symbol) =&gt; { console.log(symbol); // ACT }); // get the decimals of the ACT act.decimals().then((decimals) =&gt; { console.log(decimals); // 18 }); // get the total supply of the ACT act.totalSupply().then((totalSupply) =&gt; { console.log(totalSupply); // 1186.2 }); // get the own balance of the ACT act.balanceOf().then((balance) =&gt; { console.log(balance); // 546.4 }); // transfer ACT to the specific account act.transfer( 'hxd67aa5101f339e3afd278a9a26bf78d94f1ba802', 10 ).then((txHash) =&gt; { console.log(txHash); // 0x953892f757824559d647c894af7fa170c5b9a04892288b7557a3b70e9017c201 return wallet.getTransactionResult(txHash, 5); }).then((txResult) =&gt; { console.log(JSON.stringify(txResult)); }); /* {\"txHash\":\"0x953892f757824559d647c894af7fa170c5b9a04892288b7557a3b70e9017c201\",\"blockHeight\":\"0x242a\",\"blockHash\":\"0xa2863755a5fcce196542507ac37240847cd506f0f9d408bcb2c09f4bcecd2bd0\",\"txIndex\":\"0x2\",\"to\":\"cx3d85fc30097cb8b18eb52de927b444833c690705\",\"stepUsed\":\"0x23c08\",\"stepPrice\":\"0x2540be400\",\"cumulativeStepUsed\":\"0x54df8\",\"eventLogs\":[{\"scoreAddress\":\"cx3d85fc30097cb8b18eb52de927b444833c690705\",\"indexed\":[\"Transfer(Address,Address,int,bytes)\",\"hx3938461680520062e9fe7e46288d6b74a8682ce7\",\"hxd67aa5101f339e3afd278a9a26bf78d94f1ba802\",\"0x8ac7230489e80000\"],\"data\":[\"0x\"]}],\"logsBloom\":\"0x000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000000000000002400000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000001000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000\",\"status\":\"0x1\"} */ Interface with the smart contract of the STG token const Wallet = require('stayge-wallet'); const password = 'test123!'; const wallet = Wallet.fromKeyStoreFile('./test_user1.keystore', password); const stgScoreAddress = 'cx8ada5f95f337ae332c97f3375e7e4f8209617143'; const stg = wallet.stg(stgScoreAddress); // get the name of the STG stg.name().then((name) =&gt; { console.log(name); // STG }); // get the symbol of the STG stg.symbol().then((symbol) =&gt; { console.log(symbol); // STG }); // get the decimals of the STG stg.decimals().then((decimals) =&gt; { console.log(decimals); // 18 }); // get the total supply of the STG stg.totalSupply().then((totalSupply) =&gt; { console.log(totalSupply); // 10000000000 }); // get the own balance of the STG stg.balanceOf().then((balance) =&gt; { console.log(balance); // 1639 }); // transfer STG to the specific account stg.transfer( 'hxd67aa5101f339e3afd278a9a26bf78d94f1ba802', 10 ).then((txHash) =&gt; { console.log(txHash); // 0x446f3e335e1b851cea5bcbe9700a602c936b2bb7ea21bd6e396cfd420fba9a5a return wallet.getTransactionResult(txHash, 5); }).then((txResult) =&gt; { console.log(JSON.stringify(txResult)); }); /* {\"txHash\":\"0x446f3e335e1b851cea5bcbe9700a602c936b2bb7ea21bd6e396cfd420fba9a5a\",\"blockHeight\":\"0x2437\",\"blockHash\":\"0x6b606460a1392d0899ba768af7660a5beb3561ae2f6ce1bc619ad38651382f52\",\"txIndex\":\"0x3\",\"to\":\"cx8ada5f95f337ae332c97f3375e7e4f8209617143\",\"stepUsed\":\"0x23c08\",\"stepPrice\":\"0x2540be400\",\"cumulativeStepUsed\":\"0x78a00\",\"eventLogs\":[{\"scoreAddress\":\"cx8ada5f95f337ae332c97f3375e7e4f8209617143\",\"indexed\":[\"Transfer(Address,Address,int,bytes)\",\"hx3938461680520062e9fe7e46288d6b74a8682ce7\",\"hxd67aa5101f339e3afd278a9a26bf78d94f1ba802\",\"0x8ac7230489e80000\"],\"data\":[\"0x\"]}],\"logsBloom\":\"0x000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000000000000002400000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000001000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000\",\"status\":\"0x1\"} */ API ReferenceFor the complete API Reference, refer to doc/refs/index.html LicenseMIT License Ã— Search results Close "},"module-stayge-wallet.html":{"id":"module-stayge-wallet.html","title":"Module: stayge-wallet","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet STAYGE wallet module for javascript Source: wallet/index.js, line 1 Classes Wallet Ã— Search results Close "},"module-stayge-wallet_act.html":{"id":"module-stayge-wallet_act.html","title":"Module: stayge-wallet/act","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/act Provides smart contract APIs for ACT Source: wallet/act.js, line 1 Classes ACT Ã— Search results Close "},"module-stayge-wallet_act-ACT.html":{"id":"module-stayge-wallet_act-ACT.html","title":"Class: ACT","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Class: ACT stayge-wallet/act~ ACT Class representing the ACT smart contract new ACT(wallet, scoreAddress) Create a ACT Parameters: Name Type Description wallet Wallet scoreAddress String contract address of ACT Source: wallet/act.js, line 13 Methods &lt;async&gt; allowance(owner, spender) Returns allowance of the spender for the owner balance Parameters: Name Type Description owner String address of the owner spender String address of the spender Source: wallet/act.js, line 158 Returns: Type Promise.&lt;Number&gt; &lt;async&gt; approve(spender, value) Approve spender to transfer the specified ACT from the owner's balance Parameters: Name Type Description spender String address of the spender value Number ACT amount to approve Source: wallet/act.js, line 185 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; balanceOf(owner) Returns balance of ACT for the specified owner Parameters: Name Type Description owner String address of owner Source: wallet/act.js, line 101 Returns: Type Promise.&lt;Number&gt; &lt;async&gt; burn(amount) Burn tokens Parameters: Name Type Description amount Number amount to burn Source: wallet/act.js, line 316 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; decAllowance(spender, value) Decrease allowance of the spender for the owner's balance Parameters: Name Type Description spender String address of the spender value Number ACT amount to decrease Source: wallet/act.js, line 236 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; decimals() Returns decimals Source: wallet/act.js, line 60 Returns: Type Promise.&lt;Number&gt; &lt;async&gt; incAllowance(spender, value) Increase allowance of the spender for the owner's balance Parameters: Name Type Description spender String address of the spender value Number ACT amount to increase Source: wallet/act.js, line 211 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; mint(to, amount) Mint tokens and allocate to the specified recipient Parameters: Name Type Description to String address of the recipient amount Number amount to mint Source: wallet/act.js, line 291 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; name() Returns name Source: wallet/act.js, line 30 Returns: Type Promise.&lt;String&gt; &lt;async&gt; pause() Pause contract to disable it's functionalities Source: wallet/act.js, line 339 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; paused() Returns whether the contract is paused or not Source: wallet/act.js, line 362 Returns: true: paused, false: unpaused Type Promise.&lt;Bool&gt; &lt;async&gt; setBlacklist(account, flag) set/unset blacklist Parameters: Name Type Description account String address to be set/unset as blacklist flag Bool true:set, false:unset Source: wallet/act.js, line 382 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; setWhitelist(account, flag) set/unset whitelist Parameters: Name Type Description account String address to be set/unset as whitelist flag Bool true:set, false:unset Source: wallet/act.js, line 399 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; symbol() Returns symbol Source: wallet/act.js, line 45 Returns: Type Promise.&lt;String&gt; &lt;async&gt; totalSupply() Returns total supply Source: wallet/act.js, line 75 Returns: Type Promise.&lt;Number&gt; &lt;async&gt; transfer(to, value, data) Transfer ACT to the specified recipient Parameters: Name Type Description to String address of the recipient value Number the amount to transfer data String optional Source: wallet/act.js, line 131 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; transferFrom(from, to, value) Tranfer ACT from sender to recipientOnly the amount of allowance from sender can be tranferred Parameters: Name Type Description from String address of the sender to String address of the recipient value Number ACT amount to transfer Source: wallet/act.js, line 264 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; unpause() Unpause contract to enable it's functionalities Source: wallet/act.js, line 351 Returns: txHash Type Promise.&lt;String&gt; Ã— Search results Close "},"module-stayge-wallet_icon-js_jsonrpc.html":{"id":"module-stayge-wallet_icon-js_jsonrpc.html","title":"Module: stayge-wallet/icon-js/jsonrpc","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/icon-js/jsonrpc Provides APIs for jsonrpc of ICON Source: icon-js/jsonrpc.js, line 1 Methods &lt;static&gt; call(params, endpoint) call SCORE's external function Parameters: Name Type Description params Object endpoint String Source: icon-js/jsonrpc.js, line 337 Returns: Type Promise.&lt;String&gt; &lt;static&gt; getBalance(address, endpoint) Get a balance of the address Parameters: Name Type Description address String endpoint String Source: icon-js/jsonrpc.js, line 85 Returns: balance Type Promise.&lt;String&gt; &lt;static&gt; getBlockByHash(hash, endpoint) Get a block information by hash Parameters: Name Type Description hash String endpoint String Source: icon-js/jsonrpc.js, line 141 Returns: Type Promise.&lt;Object&gt; &lt;static&gt; getBlockByHeight(height, endpoint) Get a block information by height Parameters: Name Type Description height Number endpoint String Source: icon-js/jsonrpc.js, line 110 Returns: Type Promise.&lt;Object&gt; &lt;static&gt; getLastBlock(endpoint) Get a last block information Parameters: Name Type Description endpoint String Source: icon-js/jsonrpc.js, line 170 Returns: Type Promise.&lt;Object&gt; &lt;static&gt; getScoreApi(address, endpoint) Return score api Parameters: Name Type Description address String endpoint String Source: icon-js/jsonrpc.js, line 307 Returns: Type Promise.&lt;Object&gt; &lt;static&gt; getTotalSupply(endpoint) Get total supply of ICX Parameters: Name Type Description endpoint String Source: icon-js/jsonrpc.js, line 284 Returns: total supply Type Promise.&lt;String&gt; &lt;static&gt; getTransactionByHash(txHash, endpoint) Get the transaction information by txHash Parameters: Name Type Description txHash String endpoint String Source: icon-js/jsonrpc.js, line 256 Returns: transaction information Type Promise.&lt;Object&gt; &lt;static&gt; getTransactionResult(txHash, endpoint) Get the transaction result requested by transaction hash Parameters: Name Type Description txHash String endpoint String Source: icon-js/jsonrpc.js, line 226 Returns: Type Promise.&lt;Object&gt; &lt;static&gt; sendTransaction(rawTx, endpoint) Send a transaction Parameters: Name Type Description rawTx Object [description] endpoint String [description] Source: icon-js/jsonrpc.js, line 198 Returns: transaction hash Type Promise.&lt;String&gt; &lt;inner&gt; getCurrentApiPrefix() Return prefix string of current api version Source: icon-js/jsonrpc.js, line 18 Returns: Type String &lt;async, inner&gt; requestJsonRpc(url, payload) Make a request via json rpc Parameters: Name Type Description url String payload Object Source: icon-js/jsonrpc.js, line 49 Returns: Type Promise.&lt;Object&gt; &lt;inner&gt; toPayload(method, params) Return payload for json rpc 2.0 Parameters: Name Type Description method String params Object Source: icon-js/jsonrpc.js, line 28 Returns: Type Object Ã— Search results Close "},"module-stayge-wallet_icon-js_key.html":{"id":"module-stayge-wallet_icon-js_key.html","title":"Module: stayge-wallet/icon-js/key","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/icon-js/key Provides key related functions for ICON Source: icon-js/key.js, line 1 Methods &lt;static&gt; generatePrivateKey() Generate a new private key Source: icon-js/key.js, line 22 Returns: Type Buffer &lt;static&gt; privateKeyFromKeyStoreObj(keyStoreObj, password) Get a private key from the key store object Parameters: Name Type Description keyStoreObj Object password string Source: icon-js/key.js, line 49 Returns: private key Type Buffer &lt;static&gt; privateToPublic(privateKey) Parameters: Name Type Description privateKey Buffer Source: icon-js/key.js, line 30 Returns: Type Buffer &lt;static&gt; publicToAddress(publicKey) Parameters: Name Type Description publicKey Buffer Source: icon-js/key.js, line 38 Returns: Type Buffer &lt;static&gt; toKeyStoreObj(privateKey, address, password, options) Return a keystore object from the wallet information Parameters: Name Type Description privateKey Buffer address String password String options Object Source: icon-js/key.js, line 132 Returns: keystore object Type Object Ã— Search results Close "},"module-stayge-wallet_icon-js_tx.html":{"id":"module-stayge-wallet_icon-js_tx.html","title":"Module: stayge-wallet/icon-js/tx","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/icon-js/tx Provides transaction related functions for ICON Source: icon-js/tx.js, line 1 Methods &lt;static&gt; makeIcxRawTx(data, nid) Make a raw transaction for ICX Parameters: Name Type Description data Object nid String Source: icon-js/tx.js, line 160 Returns: Type Object &lt;static&gt; signRawTx(privateKey, rawTx) Sign a raw transaction Parameters: Name Type Description privateKey Buffer rawTx Object Source: icon-js/tx.js, line 194 Returns: Type Object &lt;inner&gt; concatTypedArrays(a, b) Concatenate two typed arrays Parameters: Name Type Description a TypedArray b TypedArray Source: icon-js/tx.js, line 143 Returns: Type Buffer &lt;inner&gt; escapeString(value) Escape a string for transaction Parameters: Name Type Description value String Source: icon-js/tx.js, line 126 Returns: Type String &lt;inner&gt; generateHashKey(obj) Generate a hash key for transaction Parameters: Name Type Description obj Object Source: icon-js/tx.js, line 21 Returns: Type String &lt;inner&gt; serializeArray(arr) Serialize a array for transaction Parameters: Name Type Description arr Array Source: icon-js/tx.js, line 87 Returns: Type String &lt;inner&gt; serializeObj(obj) Serialize a object for transaction Parameters: Name Type Description obj Object Source: icon-js/tx.js, line 38 Returns: Type String Ã— Search results Close "},"module-stayge-wallet_icon-js_utils.html":{"id":"module-stayge-wallet_icon-js_utils.html","title":"Module: stayge-wallet/icon-js/utils","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/icon-js/utils Provides utility functions Source: icon-js/utils.js, line 1 Methods &lt;static&gt; convertToHex(str) Convert string to hexastring Parameters: Name Type Description str String Source: icon-js/utils.js, line 134 Returns: Type String &lt;static&gt; convertToIcx(a) Convert to icx unit Parameters: Name Type Description a Number | String | BigNumber number, string, HEX string or BigNumber Source: icon-js/utils.js, line 56 Returns: Type String &lt;static&gt; convertToLoop(value) Convert to loop unit Parameters: Name Type Description value Number | String | BigNumber Source: icon-js/utils.js, line 67 Returns: Type BigNumber &lt;static&gt; getEndPoint(name) Returns endpoint of the specified name Parameters: Name Type Description name String mainnet | testnet Source: icon-js/utils.js, line 102 Returns: Type Object &lt;static&gt; getEndPointFromEnv() Get a endpoint for current environment Source: icon-js/utils.js, line 110 Returns: Type String &lt;static&gt; isBigNumber() Returns true if object is BigNumber, otherwise false Parameters: Type Description Object Source: icon-js/utils.js, line 30 Returns: Type Boolean &lt;static&gt; isString(object) Returns true if object is string, otherwise false Parameters: Name Type Description object Object Source: icon-js/utils.js, line 18 Returns: Type Boolean &lt;static&gt; sleep(ms) Sleep for the specified time Parameters: Name Type Description ms Number milliseconds Source: icon-js/utils.js, line 125 Returns: Type Promise &lt;static&gt; toBigNumber(a) Transforms into an bignumber Parameters: Name Type Description a Number | String | BigNumber number, string, HEX string or BigNumber Source: icon-js/utils.js, line 39 Returns: BigNumber Type BigNumber &lt;static&gt; toHashString(value) Convert to hash string leading '0x' Parameters: Name Type Description value String Source: icon-js/utils.js, line 93 Returns: Type String &lt;static&gt; toHexString(value) Convert a number to hexadecimal string Parameters: Name Type Description value Number | String | BigNumber Source: icon-js/utils.js, line 76 Returns: Type String Ã— Search results Close "},"module-stayge-wallet_icon-js_wallet.html":{"id":"module-stayge-wallet_icon-js_wallet.html","title":"Module: stayge-wallet/icon-js/wallet","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/icon-js/wallet ICON wallet module for javascript Source: icon-js/wallet.js, line 1 Classes Wallet Ã— Search results Close "},"module-stayge-wallet_icon-js_wallet-Wallet.html":{"id":"module-stayge-wallet_icon-js_wallet-Wallet.html","title":"Class: Wallet","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Class: Wallet module:stayge-wallet/icon-js/wallet~ Wallet Class representing a ICON Wallet new Wallet(privateKey) Create a ICON Wallet Parameters: Name Type Description privateKey Buffer private key for wallet Source: icon-js/wallet.js, line 20 Methods &lt;static&gt; create() Factory method to create a new wallet with a newly generated private key Source: icon-js/wallet.js, line 27 Returns: Type Wallet &lt;static&gt; fromKeyStoreObj(keyStoreObj, password) Factory method to create a wallet from the keystore object Parameters: Name Type Description keyStoreObj Object | string [description] password String [description] Source: icon-js/wallet.js, line 46 Returns: [description] Type Wallet &lt;static&gt; fromPrivateKey(privateKeyString) Factory method to create a wallet from the private key Parameters: Name Type Description privateKeyString String Source: icon-js/wallet.js, line 36 Returns: Type Wallet &lt;async&gt; call(to, method, params) Call SCORE's external function Parameters: Name Type Description to String method String params Object Source: icon-js/wallet.js, line 348 Returns: Type Promise.&lt;String&gt; &lt;async&gt; callScoreTx(scoreAddress, scoreMethod, methodParams) Send a transaction for calling a SCORE'S method Parameters: Name Type Description scoreAddress String scoreMethod String methodParams Object Source: icon-js/wallet.js, line 250 Returns: txHash Type Promise.&lt;String&gt; getAddress() Get the address of the wallet Source: icon-js/wallet.js, line 106 Returns: Type Buffer getAddressString() Get the address string of the wallet Source: icon-js/wallet.js, line 114 Returns: Type String &lt;async&gt; getBalance() Get balance of the wallet Source: icon-js/wallet.js, line 179 Returns: Type Promise.&lt;String&gt; &lt;async&gt; getBlockByHash(height) Get the block information by hash Parameters: Name Type Description height String Source: icon-js/wallet.js, line 162 Returns: Type Promise.&lt;Object&gt; &lt;async&gt; getBlockByHeight(height) Get the block information by height Parameters: Name Type Description height Number | String Source: icon-js/wallet.js, line 152 Returns: Type Promise.&lt;Object&gt; getEndPoint() get the endpoint Source: icon-js/wallet.js, line 143 Returns: uri of endpoint Type String &lt;async&gt; getLastBlock() Get the last block information Source: icon-js/wallet.js, line 170 Returns: Type Promise.&lt;Object&gt; getPrivateKey() Get the private key of the wallet Source: icon-js/wallet.js, line 72 Returns: Type Buffer getPrivateKeyString() Get the private key string of the wallet Source: icon-js/wallet.js, line 80 Returns: Type String getPublicKey() Get the public key of the wallet Source: icon-js/wallet.js, line 89 Returns: Type Buffer getPublicKeyString() Get the public key string of the wallet Source: icon-js/wallet.js, line 98 Returns: Type String &lt;async&gt; getScoreApi(address) Get the SCORE's external API list Parameters: Name Type Description address String Source: icon-js/wallet.js, line 372 Returns: Type Promise.&lt;Object&gt; &lt;async&gt; getTotalSupply() Get total supply of ICX Source: icon-js/wallet.js, line 187 Returns: Type Promise.&lt;String&gt; &lt;async&gt; getTransactionByHash(txHash) Get the transaction information by txHash Parameters: Name Type Description txHash String Source: icon-js/wallet.js, line 390 Returns: Type Promise.&lt;Object&gt; &lt;async&gt; getTransactionResult(txHash) Get the transaction result with the specified txHash Parameters: Name Type Description txHash String Source: icon-js/wallet.js, line 381 Returns: Type Promise.&lt;Object&gt; &lt;async&gt; installScore(scoreContent, installParams) Install a SCORE on the ICON blockchain Parameters: Name Type Description scoreContent String installParams Object Source: icon-js/wallet.js, line 281 Returns: txHash Type Promise.&lt;String&gt; setEndPoint(name) set the endpoint Parameters: Name Type Description name String 'mainnet' | 'testnet' Source: icon-js/wallet.js, line 135 toKeyStoreObj(password) Convert the wallet to the keystore object Parameters: Name Type Description password String Source: icon-js/wallet.js, line 123 Returns: Type Object &lt;async&gt; transferICX(to, value) Transfer ICX coins Parameters: Name Type Description to String value Number Source: icon-js/wallet.js, line 198 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; transferMessage(to, msg) Transafer a message Parameters: Name Type Description to String msg String Source: icon-js/wallet.js, line 223 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; updateScore(scoreAddress, scoreContent, updateParams) Update the SCORE on the ICON blockchain Parameters: Name Type Description scoreAddress String address of score scoreContent String score contents of hexstring format updateParams Object parameter for update Source: icon-js/wallet.js, line 315 Returns: Type Promise.&lt;String&gt; Ã— Search results Close "},"module-stayge-wallet_stg.html":{"id":"module-stayge-wallet_stg.html","title":"Module: stayge-wallet/stg","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/stg Provides smart contract APIs for STG Source: wallet/stg.js, line 1 Classes STG Ã— Search results Close "},"module-stayge-wallet_stg-STG.html":{"id":"module-stayge-wallet_stg-STG.html","title":"Class: STG","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Class: STG module:stayge-wallet/stg~ STG Class representing the STG smart contract new STG(wallet, scoreAddress) Create a STG Parameters: Name Type Description wallet Wallet scoreAddress String contract address of STG Source: wallet/stg.js, line 13 Methods &lt;async&gt; allowance(owner, spender) Returns allowance of the spender for the owner balance Parameters: Name Type Description owner String address of the owner spender String address of the spender Source: wallet/stg.js, line 157 Returns: Type Promise.&lt;Number&gt; &lt;async&gt; approve(spender, value) Approve spender to transfer the specified STG from the owner's balance Parameters: Name Type Description spender String address of the spender value Number STG amount to approve Source: wallet/stg.js, line 184 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; balanceOf(owner) Returns balance of STG for the specified owner Parameters: Name Type Description owner String address of owner Source: wallet/stg.js, line 101 Returns: Type Promise.&lt;Number&gt; &lt;async&gt; burn(amount) Burn tokens Parameters: Name Type Description amount Number amount to burn Source: wallet/stg.js, line 311 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; decAllowance(spender, value) Decrease allowance of the spender for the owner's balance Parameters: Name Type Description spender String address of the spender value Number STG amount to decrease Source: wallet/stg.js, line 235 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; decimals() Returns decimals Source: wallet/stg.js, line 60 Returns: Type Promise.&lt;Number&gt; &lt;async&gt; incAllowance(spender, value) Increase allowance of the spender for the owner's balance Parameters: Name Type Description spender String address of the spender value Number STG amount to increase Source: wallet/stg.js, line 209 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; mint(amount) Mint tokens and allocate to the contract owner Parameters: Name Type Description amount Number amount to mint Source: wallet/stg.js, line 288 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; name() Returns name Source: wallet/stg.js, line 30 Returns: Type Promise.&lt;String&gt; &lt;async&gt; pause() Pause contract to disable it's functionalities Source: wallet/stg.js, line 333 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; paused() Returns whether the contract is paused or not Source: wallet/stg.js, line 355 Returns: true: paused, false: unpaused Type Promise.&lt;Bool&gt; &lt;async&gt; setBlacklist(account, flag) set/unset blacklist Parameters: Name Type Description account String address to be set/unset as blacklist flag Bool true:set, false:unset Source: wallet/stg.js, line 375 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; setWhitelist(account, flag) set/unset whitelist Parameters: Name Type Description account String address to be set/unset as whitelist flag Bool true:set, false:unset Source: wallet/stg.js, line 392 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; symbol() Returns symbol Source: wallet/stg.js, line 45 Returns: Type Promise.&lt;String&gt; &lt;async&gt; totalSupply() Returns total supply Source: wallet/stg.js, line 75 Returns: Type Promise.&lt;Number&gt; &lt;async&gt; transfer(to, value, data) Transfer STG to the specified recipient Parameters: Name Type Description to String address of the recipient value Number the amount to transfer data String optional Source: wallet/stg.js, line 131 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; transferFrom(from, to, value) Tranfer STG from sender to recipientOnly the amount of allowance from sender can be tranferred Parameters: Name Type Description from String address of the sender to String address of the recipient value Number STG amount to transfer Source: wallet/stg.js, line 263 Returns: txHash Type Promise.&lt;String&gt; &lt;async&gt; unpause() Unpause contract to enable it's functionalities Source: wallet/stg.js, line 344 Returns: txHash Type Promise.&lt;String&gt; Ã— Search results Close "},"module-stayge-wallet-Wallet.html":{"id":"module-stayge-wallet-Wallet.html","title":"Class: Wallet","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Class: Wallet stayge-wallet~ Wallet Class representing a STAYGE Wallet new Wallet(baseWallet) Create a Wallet Parameters: Name Type Description baseWallet Object underlying wallet object Source: wallet/index.js, line 19 Methods &lt;static&gt; create() Factory method to create a new wallet with a newly generated private key Source: wallet/index.js, line 25 Returns: Type Wallet &lt;static&gt; fromKeyStoreFile(keyStorePath, password) Factory method to create a wallet from the keystore file Parameters: Name Type Description keyStorePath String password String Source: wallet/index.js, line 57 Returns: Type Wallet &lt;static&gt; fromKeyStoreObj(keyStoreObj, password) Factory method to create a wallet from the keystore object Parameters: Name Type Description keyStoreObj Object | String password String Source: wallet/index.js, line 46 Returns: Type Wallet &lt;static&gt; fromPrivateKey(privateKeyString) Factory method to create a wallet from the specified private key Parameters: Name Type Description privateKeyString String Source: wallet/index.js, line 35 Returns: Type Wallet act(scoreAddress) Return ACT socre object with the specified score address Parameters: Name Type Description scoreAddress String address of score Source: wallet/index.js, line 87 Returns: score object of ACT Type ACT &lt;async&gt; call(to, method, params) Call a smart contract's external function for querying Parameters: Name Type Description to String method String params Object Source: wallet/index.js, line 299 Returns: Type Promise.&lt;String&gt; &lt;async&gt; callContractTx(contractAddress, contractMethod, methodParams) Send a transaction for calling a smart contract's method Parameters: Name Type Description contractAddress String contractMethod String methodParams Object Source: wallet/index.js, line 252 Returns: hash of transacgtion Type Promise.&lt;String&gt; getAddress() Get the wallet address Source: wallet/index.js, line 131 Returns: Type Buffer getAddressString() Get the wallet address string Source: wallet/index.js, line 140 Returns: Type String &lt;async&gt; getBalance() Get balance of the wallet Source: wallet/index.js, line 206 Returns: balance of the wallet owner Type Promise.&lt;String&gt; &lt;async&gt; getBlockByHash(height) Get block information by hash Parameters: Name Type Description height String hash of block Source: wallet/index.js, line 188 Returns: block information Type Promise.&lt;Object&gt; &lt;async&gt; getBlockByHeight(height) Get block information by height Parameters: Name Type Description height Number | String height of block Source: wallet/index.js, line 178 Returns: block information Type Promise.&lt;Object&gt; &lt;async&gt; getContractApi(address) Get the smart contract's external API list Parameters: Name Type Description address String Source: wallet/index.js, line 308 Returns: Type Promise.&lt;Object&gt; getEndPoint() get endpoint Source: wallet/index.js, line 168 Returns: endpoint information Type String &lt;async&gt; getLastBlock() Get a last block information Source: wallet/index.js, line 197 Returns: block information Type Promise.&lt;Object&gt; getPrivateKey() Get the private key of the wallet Source: wallet/index.js, line 96 Returns: Type Buffer getPrivateKeyString() Get the private key string of the wallet Source: wallet/index.js, line 105 Returns: Type String getPublicKey() Get a public key of the wallet Source: wallet/index.js, line 114 Returns: Type Buffer getPublicKeyString() Get a public key string of the wallet Source: wallet/index.js, line 123 Returns: Type String &lt;async&gt; getTotalSupply() Get total supply of ICX Source: wallet/index.js, line 215 Returns: total supply of underlying network Type Promise.&lt;String&gt; &lt;async&gt; getTransactionByHash(txHash) Get the transaction information by txHash Parameters: Name Type Description txHash String Source: wallet/index.js, line 351 Returns: Type Promise.&lt;Object&gt; &lt;async&gt; getTransactionResult(txHash, timeout) Get the transaction result requested by transaction hash Parameters: Name Type Default Description txHash String timeout Number 0 seconds to timeout. if not specified, it will be set to the default value of 0 Source: wallet/index.js, line 319 Returns: Type Promise.&lt;Object&gt; &lt;async&gt; installContract(contractPath, installParams) Install a smart contract on the underlying blockchain Parameters: Name Type Description contractPath String installParams Object Source: wallet/index.js, line 267 Returns: txHash Type Promise.&lt;String&gt; setEndPoint(name) set endpoint Parameters: Name Type Description name String 'mainnet' | 'testnet' Source: wallet/index.js, line 159 stg(scoreAddress) Return STG score object with the specified score address Parameters: Name Type Description scoreAddress String address of score Source: wallet/index.js, line 77 Returns: score object of STG Type STG toKeyStoreObj(password) Convert a wallet to key store object Parameters: Name Type Description password String password for the wallet Source: wallet/index.js, line 150 Returns: Type Object &lt;async&gt; transferCoin(to, value) Transfer coins Parameters: Name Type Description to String address of recipient value Number value to transfer Source: wallet/index.js, line 226 Returns: hash of transaction Type Promise.&lt;String&gt; &lt;async&gt; transferMessage(to, msg) Transafer a message Parameters: Name Type Description to String address of recipent msg String message to transfer Source: wallet/index.js, line 237 Returns: hash of transaction Type Promise.&lt;String&gt; &lt;async&gt; updateContract(contractAddress, contractPath, updateParams) Update the smart contract on the underlying blockchain Parameters: Name Type Description contractAddress type contractPath type updateParams type Source: wallet/index.js, line 281 Returns: txHash Type Promise.&lt;String&gt; Ã— Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
