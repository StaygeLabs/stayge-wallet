<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"wallet_index.js.html":{"id":"wallet_index.js.html","title":"Source: wallet/index.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: wallet/index.js /** * STAYGE wallet module for javascript * @module stayge-wallet */ 'use strict' const fs = require('fs') const AdmZip = require('adm-zip'); const IconWallet = require('../icon-js/wallet.js'); const utils = require('../icon-js/utils.js'); const STG = require('./stg.js') const ACT = require('./act.js') /** * Provides wallet API for STAYGE Network * @class * @constructor * @param {Object} baseWallet underlying wallet object */ const Wallet = function(baseWallet) { this._baseWallet = baseWallet; } /** * Return STG score object with the specified score address * @param {String} scoreAddress address of score * @return {STG} score object of STG */ Wallet.prototype.stg = function(scoreAddress) { return new STG(this, scoreAddress) } /** * Return ACT socre object with the specified score address * @param {String} scoreAddress address of score * @return {ACT} score object of ACT */ Wallet.prototype.act = function(scoreAddress) { return new ACT(this, scoreAddress) } /** * Get the private key of the wallet * @return {Buffer} */ Wallet.prototype.getPrivateKey = function() { return this._baseWallet.getPrivateKey(); } /** * Get the private key string of the wallet * @return {String} */ Wallet.prototype.getPrivateKeyString = function() { return this._baseWallet.getPrivateKeyString(); } /** * Get a public key of the wallet * @return {Buffer} */ Wallet.prototype.getPublicKey = function() { return this._baseWallet.getPublicKey(); } /** * Get a public key string of the wallet * @return {String} */ Wallet.prototype.getPublicKeyString = function() { return this._baseWallet.getPublicKeyString(); } /** * Get the wallet address * @return {Buffer} */ Wallet.prototype.getAddress = function() { return this._baseWallet.getAddress(); } /** * Get the wallet address string * @return {String} */ Wallet.prototype.getAddressString = function() { return this._baseWallet.getAddressString(); } /** * Convert a wallet to key store object * @param {String} password password for the wallet * @return {Object} */ Wallet.prototype.toKeyStoreObj = function(password) { return this._baseWallet.toKeyStoreObj(password); } /** * set endpoint * @param {String} name 'mainnet' | 'testnet' */ Wallet.prototype.setEndPoint = function(name) { return this._baseWallet.setEndPoint(name); } /** * get endpoint * @return {String} endpoint information */ Wallet.prototype.getEndPoint = function() { return this._baseWallet.getEndPoint(); } /** * Get block information by height * @param {Number|String} height height of block * @return {Promise&lt;Object&gt;} block information */ Wallet.prototype.getBlockByHeight = async function(height) { return this._baseWallet.getBlockByHeight(height); } /** * Get block information by hash * @param {String} height hash of block * @return {Promise&lt;Object&gt;} block information */ Wallet.prototype.getBlockByHash = async function(hash) { return this._baseWallet.getBlockByHash(hash); } /** * Get a last block information * @return {Promise&lt;Object&gt;} block information */ Wallet.prototype.getLastBlock = async function() { return this._baseWallet.getLastBlock(); } /** * Get balance of the wallet * @return {Promise&lt;String&gt;} balance of the wallet owner */ Wallet.prototype.getBalance = async function() { return this._baseWallet.getBalance(); } /** * Get total supply of ICX * @return {Promise&lt;String&gt;} total supply of underlying network */ Wallet.prototype.getTotalSupply = async function() { return this._baseWallet.getTotalSupply(); } /** * Transfer ICX coins * @param {String} to address of recipient * @param {Number} value value to transfer * @return {Promise&lt;String&gt;} hash of transaction */ Wallet.prototype.transferICX = async function(to, value) { return this._baseWallet.transferICX(to, value); } /** * Transafer a message * @param {String} to address of recipent * @param {String} msg message to transfer * @return {Promise&lt;String&gt;} hash of transaction */ Wallet.prototype.transferMessage = async function(to, msg) { return this._baseWallet.transferMessage( to, msg.length &gt; 0 ? utils.convertToHex(msg) : msg ); } /** * Send a transaction for calling a SCORE'S method * @param {String} scoreAddress * @param {String} scoreMethod * @param {Object} methodParams * @return {Promise&lt;String&gt;} hash of transacgtion */ Wallet.prototype.callScoreTx = async function( scoreAddress, scoreMethod, methodParams ) { return this._baseWallet.callScoreTx(scoreAddress, scoreMethod, methodParams); } /** * Install a SCORE on the ICON blockchain * @param {String} scorePath * @param {Object} installParams * @return {Promise&lt;String&gt;} txHash */ Wallet.prototype.installScore = async function(scorePath, installParams) { const zip = new AdmZip(scorePath); const scoreContent = '0x' + zip.toBuffer().toString('hex'); return this._baseWallet.installScore(scoreContent, installParams); } /** * Update a SCORE on the ICON blockchain * @param {type} scoreAddress * @param {type} scorePath * @param {type} updateParams * @return {Promise&lt;String&gt;} txHash */ Wallet.prototype.updateScore = async function( scoreAddress, scorePath, updateParams ) { const zip = new AdmZip(scorePath); const scoreContent = '0x' + zip.toBuffer().toString('hex'); return this._baseWallet.updateScore(scoreAddress, scoreContent, updateParams); } /** * Call SCORE's external function * @param {String} to * @param {String} method * @param {Object} params * @return {Promise&lt;String&gt;} */ Wallet.prototype.call = async function(to, method, params) { return this._baseWallet.call(to, method, params); } /** * Get SCORE's external API list * @param {String} address * @return {Promise&lt;Object&gt;} */ Wallet.prototype.getScoreApi = async function(address) { return this._baseWallet.getScoreApi(address); } /** * Get the transaction result requested by transaction hash * @param {String} txHash * @return {Promise&lt;Object&gt;} */ Wallet.prototype.getTransactionResult = async function(txHash, ignorePending=true) { let i = 0 for (i = 0; i &lt; 20; i++) { try { const txResult = await this._baseWallet.getTransactionResult(txHash) return txResult; } catch (err) { //console.log(`getTransactionResult = ${err.message}`); if ((ignorePending &amp;&amp; err.message.indexOf('Pending') != -1) || err.message.indexOf('Invalid params txHash') != -1) { await utils.sleep(500); } else { throw err; } } } throw new Error(`The transaction of ${txHash} is pending`); } /** * Get the transaction information by txHash * @param {String} txHash * @return {Promise&lt;Object&gt;} */ Wallet.prototype.getTransactionByHash = async function(txHash) { return this._baseWallet.getTransactionByHash(txHash); } /** * Create a new wallet with a newly generated private key * @return {Wallet} */ Wallet.create = function() { return new Wallet(IconWallet.create()); } /** * @param {String} privateKeyString * @return {Wallet} */ Wallet.fromPrivateKey = function(privateKeyString) { return new Wallet(IconWallet.fromPrivateKey(privateKeyString)); } /** * Create a wallet from a keystore object * @param {Object|String} keyStoreObj * @param {String} password * @return {Wallet} */ Wallet.fromKeyStoreObj = function(keyStoreObj, password) { return new Wallet(IconWallet.fromKeyStoreObj(keyStoreObj, password)); } /** * Create a wallet from a keystore file * @param {String} keyStorePath * @param {String} password * @return {Wallet} */ Wallet.fromKeyStoreFile = function(keyStorePath, password) { const content = fs.readFileSync(keyStorePath); const keyStoreObj = JSON.parse(content); return new Wallet(IconWallet.fromKeyStoreObj(keyStoreObj, password)); } /** @type {Wallet} */ module.exports = Wallet; × Search results Close "},"wallet_act.js.html":{"id":"wallet_act.js.html","title":"Source: wallet/act.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: wallet/act.js /** * Provides smart contract APIs for ACT * @module stayge-wallet/act */ 'use strict' const utils = require('../icon-js/utils.js'); /** * Smart contract APIs for ACT * @class * @constructor * @param {Wallet} wallet * @param {String} scoreAddress contract address of ACT */ const ACT = function(wallet, scoreAddress) { this._wallet = wallet; this._scoreAddress = scoreAddress; } /** * Returns name * @return {Promise&lt;String&gt;} */ ACT.prototype.name = async function() { const name = await this._wallet.call( this._scoreAddress, 'name', {} ); return name; } /** * Returns symbol * @return {Promise&lt;String&gt;} */ ACT.prototype.symbol = async function() { const symbol = await this._wallet.call( this._scoreAddress, 'symbol', {} ); return symbol; } /** * Returns decimals * @return {Promise&lt;Number&gt;} */ ACT.prototype.decimals = async function() { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return utils.toBigNumber(decimals).toNumber(); } /** * Returns total supply * @return {Promise&lt;Number&gt;} */ ACT.prototype.totalSupply = async function() { const totalSupply = await this._wallet.call( this._scoreAddress, 'totalSupply', {} ); const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return utils .toBigNumber(totalSupply) .dividedBy(10 ** utils.toBigNumber(decimals)) .toNumber(); } /** * Returns balance of ACT for the specified owner * @param {String} owner address of owner * @return {Promise&lt;Number&gt;} */ ACT.prototype.balanceOf = async function(owner) { owner = owner || this._wallet.getAddressString(); const balance = await this._wallet.call( this._scoreAddress, 'balanceOf', {_owner: owner} ); const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return utils .toBigNumber(balance) .dividedBy(10 ** utils.toBigNumber(decimals)) .toNumber(); } /** * Transfer ACT to the specified recipient * @param {String} to address of the recipient * @param {Number} value the amount to transfer * @param {String} data optional * @return {Promise&lt;String&gt;} txHash */ ACT.prototype.transfer = async function(to, value, data='') { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'transfer', { _to: to, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), _data: data.length &gt; 0 ? utils.convertToHex(data) : data, } ); } /** * Returns allowance of the spender for the owner balance * @param {String} owner address of the owner * @param {String} spender address of the spender * @return {Promise&lt;Number&gt;} */ ACT.prototype.allowance = async function(owner, spender) { const allowance = await this._wallet.call( this._scoreAddress, 'allowance', {_owner: owner, _spender: spender} ); const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return utils .toBigNumber(allowance) .dividedBy(10 ** utils.toBigNumber(decimals)) .toNumber(); } /** * Approve spender to transfer the specified ACT from the owner's balance * @param {String} spender address of the spender * @param {Number} value ACT amount to approve * @return {Promise&lt;String&gt;} txHash */ ACT.prototype.approve = async function(spender, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'approve', { _spender: spender, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Increase allowance of the spender for the owner's balance * @param {String} spender address of the spender * @param {Number} value ACT amount to increase * @return {Promise&lt;String&gt;} txHash */ ACT.prototype.incAllowance = async function(spender, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'inc_allowance', { _spender: spender, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Decrease allowance of the spender for the owner's balance * @param {String} spender address of the spender * @param {Number} value ACT amount to decrease * @return {Promise&lt;String&gt;} txHash */ ACT.prototype.decAllowance = async function(spender, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'dec_allowance', { _spender: spender, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Tranfer ACT from sender to recipient * Only the amount of allowance from sender can be tranferred * @param {String} from address of the sender * @param {String} to address of the recipient * @param {Number} value ACT amount to transfer * @return {Promise&lt;String&gt;} txHash */ ACT.prototype.transferFrom = async function(from, to, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'transfer_from', { _from: from, _to: to, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Mint tokens and allocate to the specified recipient * @param {String} to address of the recipient * @param {Number} amount amount to mint * @return {Promise&lt;String&gt;} txHash */ ACT.prototype.mint = async function(to, amount) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'mint', { _to: to, _amount: utils.toHexString( utils.toBigNumber(amount).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Burn tokens * @param {Number} amount amount to burn * @return {Promise&lt;String&gt;} txHash */ ACT.prototype.burn = async function(amount) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'burn', { _amount: utils.toHexString( utils.toBigNumber(amount).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Pause contract to disable it's functionalities * @return {Promise&lt;String&gt;} txHash */ ACT.prototype.pause = async function() { return this._wallet.callScoreTx( this._scoreAddress, 'pause', ); } /** * Unpause contract to enable it's functionalities * @return {Promise&lt;String&gt;} txHash */ ACT.prototype.unpause = async function() { return this._wallet.callScoreTx( this._scoreAddress, 'unpause', ); } /** * Returns whether the contract is paused or not * @return {Promise&lt;Bool&gt;} true: paused, false: unpaused */ ACT.prototype.paused = async function() { const paused = await this._wallet.call( this._scoreAddress, 'paused', {} ); if (paused == '0x1') { return true; } else { return false; } } /** * set/unset blacklist * @param {String} account address to be set/unset as blacklist * @param {Bool} flag true:set, false:unset * @return {Promise&lt;String&gt;} txHash */ ACT.prototype.setBlacklist = async function(account, flag) { return this._wallet.callScoreTx( this._scoreAddress, 'set_blacklist', { _account: account, _value:utils.toHexString(flag ? 1 : 0) } ); } /** * set/unset whitelist * @param {String} account address to be set/unset as whitelist * @param {Bool} flag true:set, false:unset * @return {Promise&lt;String&gt;} txHash */ ACT.prototype.setWhitelist = async function(account, flag) { return this._wallet.callScoreTx( this._scoreAddress, 'set_whitelist', { _account: account, _value:utils.toHexString(flag ? 1 : 0) } ); } module.exports = ACT; × Search results Close "},"icon-js_jsonrpc.js.html":{"id":"icon-js_jsonrpc.js.html","title":"Source: icon-js/jsonrpc.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: icon-js/jsonrpc.js /** * Provides APIs for jsonrpc of ICON * @module stayge-wallet/icon-js/jsonrpc */ 'use strict' const API_VERSION = require('./config.js').apiVersion; const request = require('request'); const utils = require('./utils.js'); var msgId = 0; /** * Return prefix string of current api version * @return {String} */ function getCurrentApiPrefix() { return '/api/v' + API_VERSION; } /** * Return payload for json rpc 2.0 * @param {String} method * @param {Object} params * @return {Object} */ function toPayload(method, params) { const payload = { jsonrpc: '2.0', id: ++msgId, method: method, } if (params) { payload.params = params; } return payload; } /** * Make a request via json rpc * @param {String} url * @param {Object} payload * @return {Promise&lt;Object&gt;} */ async function requestJsonRpc(url, payload) { const opts = { url: url, method: 'POST', headers:{ 'Content-type': 'application/json' }, body: payload, json: true }; return new Promise(function(resolve, reject) { request(opts, function(err, res, body) { if (err) reject(err); resolve(body); }); }); } module.exports = { /** * Get a balance of the address * @param {String} address * @param {String} endpoint * @return {Promise&lt;String&gt;} balance */ getBalance : async function(address, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getBalance', { address : address } ); const body = await requestJsonRpc(url, payload); const result = body.result; if (!result) { throw new Error(JSON.stringify(body)); } return utils.convertToIcx(result); }, /** * Get a block information by height * @param {Number} height * @param {String} endpoint * @return {Promise&lt;Object&gt;} */ getBlockByHeight : async function(height, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getBlockByHeight', { height : utils.toHexString(height) } ); //console.log('payload = ' + JSON.stringify(payload)); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * Get a block information by hash * @param {String} hash * @param {String} endpoint * @return {Promise&lt;Object&gt;} */ getBlockByHash : async function(hash, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getBlockByHash', { hash : utils.toHashString(hash) } ); //console.log('payload = ' + JSON.stringify(payload)); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * Get a last block information * @param {String} endpoint * @return {Promise&lt;Object&gt;} */ getLastBlock : async function(endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getLastBlock', null ); //console.log('payload = ' + JSON.stringify(payload)); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * Send a transaction * @param {Object} rawTx [description] * @param {String} endpoint [description] * @return {Promise&lt;String&gt;} transaction hash */ sendTransaction : async function(rawTx, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_sendTransaction', rawTx ); //console.log(JSON.stringify(payload)) const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * Get the transaction result requested by transaction hash * @param {String} txHash * @param {String} endpoint * @return {Promise&lt;Object&gt;} */ getTransactionResult : async function(txHash, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getTransactionResult', { txHash : utils.toHashString(txHash) } ); //console.log('payload = ' + JSON.stringify(payload)); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * Get the transaction information by txHash * @param {String} txHash * @param {String} endpoint * @return {Promise&lt;Object&gt;} transaction information */ getTransactionByHash : async function (txHash, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getTransactionByHash', { txHash : utils.toHashString(txHash) } ); //console.log('payload = ' + JSON.stringify(payload)); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * Get total supply of ICX * @param {String} endpoint * @return {Promise&lt;String&gt;} total supply */ getTotalSupply : async function(endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getTotalSupply', null ); const body = await requestJsonRpc(url, payload); const result = body.result; if (!result) { throw new Error(JSON.stringify(body)); } return utils.convertToIcx(result); }, /** * Return score api * @param {String} address * @param {String} endpoint * @return {Promise&lt;Object&gt;} */ getScoreApi : async function (address, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_getScoreApi', { address: address } ); //console.log('payload = ' + JSON.stringify(payload)); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, /** * call SCORE's external function * @param {Object} params * @param {String} endpoint * @return {Promise&lt;String&gt;} */ call : async function(params, endpoint) { const url = endpoint + getCurrentApiPrefix(); const payload = toPayload( 'icx_call', params ); //console.log('payload = ' + JSON.stringify(payload)); const body = await requestJsonRpc(url, payload); const result = body.result; //console.log(JSON.stringify(body)); //console.log('typeof body.error : ' + typeof body.error); if (!result) { throw new Error(JSON.stringify(body)); } return result; }, }; × Search results Close "},"icon-js_key.js.html":{"id":"icon-js_key.js.html","title":"Source: icon-js/key.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: icon-js/key.js /** * Provides key related functions for ICON * @module stayge-wallet/icon-js/key */ 'use strict' const crypto = require('crypto'); const secp256k1 = require('secp256k1'); const sha3_256 = require('js-sha3').sha3_256; const keccak256 = require('js-sha3').keccak256; const scrypt = require('scrypt.js'); const uuidv4 = require('uuid/v4'); module.exports = { /** * Generate a new private key * @return {Buffer} */ generatePrivateKey : function() { return crypto.randomBytes(32); }, /** * @param {Buffer} privateKey * @return {Buffer} */ privateToPublic : function(privateKey) { return secp256k1.publicKeyCreate(privateKey, false).slice(1); }, /** * @param {Buffer} publicKey * @return {Buffer} */ publicToAddress : function(publicKey) { return Buffer.from(sha3_256(publicKey), 'hex').slice(-20); }, /** * Get a private key from the key store object * @param {Object} keyStoreObj * @param {string} password * @return {Buffer} private key */ privateKeyFromKeyStoreObj : function(keyStoreObj, password) { let derivedKey; if (typeof keyStoreObj !== 'object') { throw new Error('keyStoreObj type should be Object.'); } if (typeof password !== 'string') { throw new Error('password type should be string.'); } if (keyStoreObj.version !== 3) { throw new Error('keySotreObj is not a V3 wallet'); } if (keyStoreObj.crypto.kdf === 'scrypt') { const kdfparams = keyStoreObj.crypto.kdfparams; derivedKey = scrypt( Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen ) } else if (keyStoreObj.crypto.kdf === 'pbkdf2') { const kdfparams = keyStoreObj.crypto.kdfparams; if (kdfparams.prf !== 'hmac-sha256') { throw new Error('Unsupported parameters to PBKDF2'); } derivedKey = crypto.pbkdf2Sync( Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.c, kdfparams.dklen, 'sha256' ); } else { throw new Error('Unsupported key derivation function.'); } const ciphertext = Buffer.from( keyStoreObj.crypto.ciphertext, 'hex' ); const mac = keccak256(Buffer.concat([derivedKey.slice(16, 32), ciphertext])); /* console.log('mac = ' + mac); console.log('crypto.mac = ' + keyStoreObj.crypto.mac); */ if (mac !== keyStoreObj.crypto.mac) { throw new Error('Failed to derive a key'); } const decipher = crypto.createDecipheriv( keyStoreObj.crypto.cipher, derivedKey.slice(0, 16), Buffer.from( keyStoreObj.crypto.cipherparams.iv, 'hex' ) ); return Buffer.concat([ decipher.update(ciphertext), decipher.final() ]); }, /** * Return a keystore object from the wallet information * @param {Buffer} privateKey * @param {String} address * @param {String} password * @param {Object} options * @return {Object} keystore object */ toKeyStoreObj : function(privateKey, address, password, options) { options = options || {}; const opts = { salt: options.salt || crypto.randomBytes(32), iv: options.iv || crypto.randomBytes(16), kdf: options.kdf || 'scrypt', dklen: options.dklen || 32, c: options.c || 262144, prf: 'hmac-sha256', n: options.n || 262144, r: options.r || 8, p: options.p || 1, cipher: options.cipher || 'aes-128-ctr', uuid: options.uuid || crypto.randomBytes(16) }; const kdfparams = { dklen: opts.dklen, salt: opts.salt.toString('hex') }; let derivedKey; if (opts.kdf === 'pbkdf2') { kdfparams.c = opts.c; kdfparams.prf = opts.prf; derivedKey = crypto.pbkdf2Sync( Buffer.from(password), opts.salt, opts.c, opts.dklen, 'sha256' ); } else if (opts.kdf === 'scrypt') { kdfparams.n = opts.n; kdfparams.r = opts.r; kdfparams.p = opts.p; derivedKey = scrypt( Buffer.from(password), opts.salt, kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen ); } else { throw new Error('Unsupported kdf.'); } const cipher = crypto.createCipheriv( opts.cipher, derivedKey.slice(0, 16), opts.iv ); if (!cipher) { throw new Error('Unsupported cipher'); } const ciphertext = Buffer.concat( [cipher.update(privateKey), cipher.final()] ); const mac = keccak256( Buffer.concat( [derivedKey.slice(16, 32), Buffer.from(ciphertext, 'hex')] ) ); return { version: 3, id: uuidv4({ random: opts.uuid }), address: address, crypto: { ciphertext: ciphertext.toString('hex'), cipherparams: { iv: opts.iv.toString('hex') }, cipher: opts.cipher, kdf: opts.kdf, kdfparams: kdfparams, mac: mac }, coinType: 'icx' } }, }; × Search results Close "},"icon-js_tx.js.html":{"id":"icon-js_tx.js.html","title":"Source: icon-js/tx.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: icon-js/tx.js /** * Provides transaction related functions for ICON * @module stayge-wallet/icon-js/tx */ 'use strict' const secp256k1 = require('secp256k1'); const sha3_256 = require('js-sha3').sha3_256; const BigNumber = require('bignumber.js'); const utils = require('./utils.js'); const config = require('./config.js'); var nonce = 1; /** * Generate a hash key for transaction * @param {Object} obj * @return {String} */ function generateHashKey(obj){ let resultStrReplaced = '' let resultStr = serializeObj(obj); resultStrReplaced = resultStr .substring(1) .slice(0, -1); //console.log('resultStr :' + resultStr); //console.log('resultStrReplaced:' + resultStrReplaced); const result = 'icx_sendTransaction.' + resultStrReplaced; return result; } /** * Serialize a object for transaction * @param {Object} obj * @return {String} */ function serializeObj(obj) { //console.log(obj) let result = ''; result += '{'; let keys; keys = Object.keys(obj); keys.sort(); for(let i=0;i&lt;keys.length;i++){ const key = keys[i] const value = obj[key]; switch(true) { case (value === null) : { result +=`${key}.`; result += String.raw`\\0`; break; } case (typeof value === 'string') : { result += `${key}.` result += escapeString(value) break; } case (Array.isArray(value)) : { result+= `${key}.` result += serializeArray(value) break; } case (typeof value === 'object') : { result+= `${key}.` result += serializeObj(value); break; } default: break; } result += '.' } result = result.slice(0, -1); result += '}'; return result; } /** * Serialize a array for transaction * @param {Array} arr * @return {String} */ function serializeArray(arr) { let result = ''; result += '['; for(let j=0;j&lt;arr.length;j++) { const value = arr[j]; switch(true) { case (value === null) : { result += String.raw`\\0`; break; } case (typeof value === 'string') : { result += escapeString(value) break; } case (Array.isArray(value)) : { result += serializeArray(value) break; } case (typeof value === 'object') : { result += serializieObj(value); break; } default: break; } result += '.' } result = result.slice(0, -1); result += ']'; return result; } /** * Escape a string for transaction * @param {String} value * @return {String} */ function escapeString(value) { let newString = String.raw`${value}`; newString = newString.replace('\\\\', '\\\\\\\\'); newString = newString.replace('.', '\\\\.'); newString = newString.replace('{', '\\\\{'); newString = newString.replace('}', '\\\\}'); newString = newString.replace('[', '\\\\['); newString = newString.replace(']', '\\\\]'); return newString } /** * Concatenate two typed arrays * @param {TypedArray} a * @param {TypedArray} b * @return {Buffer} */ function concatTypedArrays(a, b) { // a, b TypedArray of same type const c = Buffer.alloc(a.length + b.length); //var c = new (a.constructor)(a.length + b.length); c.set(a, 0); c.set(b, a.length); return c; } module.exports = { /** * Make a raw transaction for ICX * @param {Object} data * @param {String} nid * @return {Object} */ makeIcxRawTx : function(data, nid) { const rawTx = { from: data.from, to: data.to, version: utils.toHexString(config.apiVersion), nid: nid, stepLimit: utils.toHexString( new BigNumber(data.stepLimit).toString(16) ), timestamp: utils.toHexString( ((new Date()).getTime() * 1000).toString(16) ), nonce: utils.toHexString(nonce++) }; if (data.value) { const sendAmount = utils.convertToLoop(data.value); rawTx.value = utils.toHexString(sendAmount); } if (data.dataType) { rawTx.dataType = data.dataType; rawTx.data = data.data; } return rawTx; }, /** * Sign a raw transaction * @param {Buffer} privateKey * @param {Object} rawTx * @return {Object} */ signRawTx : function(privateKey, rawTx) { const phraseToSign = generateHashKey(rawTx); const hashcode = sha3_256.update(phraseToSign).hex(); const message = Buffer.from(hashcode, 'hex'); const sign = secp256k1.sign(message, privateKey); const recovery = new Uint8Array(1); recovery[0] = sign.recovery; const signature = concatTypedArrays(sign.signature, recovery); const b64encoded = signature.toString('base64'); /* const b64encoded = Buffer.from( String.fromCharCode.apply(null, signature) ).toString('base64'); */ const newRawTx = { ...rawTx, signature: b64encoded }; //console.log('newRawTx: ' + JSON.stringify(newRawTx)); return newRawTx }, }; × Search results Close "},"icon-js_utils.js.html":{"id":"icon-js_utils.js.html","title":"Source: icon-js/utils.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: icon-js/utils.js /** * Provides utility functions * @module stayge-wallet/icon-js/utils */ 'use strict' const BigNumber = require('bignumber.js'); const config = require('./config.js'); module.exports = { /** * Returns true if object is string, otherwise false * @param {Object} object * @return {Boolean} */ isString : function(object) { return typeof object === 'string' || (object &amp;&amp; object.constructor &amp;&amp; object.constructor.name === 'String'); }, /** * Returns true if object is BigNumber, otherwise false * @param {Object} * @return {Boolean} */ isBigNumber : function(object) { return (object &amp;&amp; (object instanceof BigNumber || (object.constructor &amp;&amp; object.constructor.name === 'BigNumber'))); }, /** * Transforms into an bignumber * @param {Number|String|BigNumber} a number, string, HEX string or BigNumber * @return {BigNumber} BigNumber */ toBigNumber : function(number) { number = number || 0; if (this.isBigNumber(number)) return number; if (this.isString(number) &amp;&amp; (number.indexOf('0x') === 0 || number.indexOf('-0x') === 0)) { return new BigNumber(number.replace('0x',''), 16); } return new BigNumber(number.toString(10), 10); }, /** * Convert to icx unit * @param {Number|String|BigNumber} a number, string, HEX string or BigNumber * @return {String} */ convertToIcx : function(value) { return this.toBigNumber(value) .dividedBy(config.unitIcx) .toString(10); }, /** * Convert to loop unit * @param {Number|String|BigNumber} value * @return {BigNumber} */ convertToLoop : function(value) { return this.toBigNumber(value).times(config.unitIcx); }, /** * Convert a number to hexadecimal string * @param {Number|String|BigNumber} value * @return {String} */ toHexString : function(value) { if (typeof value === 'number') { return value &lt; 0 ? '-0x' + value.toString(16).substr(1) : '0x' + value.toString(16); } else if (typeof value === 'string' &amp;&amp; !value.startsWith('0x')) { return '0x' + value.toString(16); } else if (this.isBigNumber(value)) { return value &lt; 0 ? '-0x' + value.toString(16).substr(1) : '0x' + value.toString(16); } else { return value; } }, /** * Convert to hash string leading '0x' * @param {String} value * @return {String} */ toHashString : function(value) { return value.substring(0, 2) === '0x' ? value : '0x' + value; }, /** * Returns endpoint of the specified name * @param {String} name mainnet | testnet * @return {Object} */ getEndPoint : function(name) { return config.endpoints[name]; }, /** * Get a endpoint for current environment * @return {String} */ getEndPointFromEnv : function() { //console.log('NODE_ENV : ' + process.env.NODE_ENV); if (process.env.NODE_ENV === 'production') { return this.getEndPoint('mainnet'); } else { return this.getEndPoint('testnet'); } }, /** * Sleep for the specified time * @param {Number} ms milliseconds * @return {Promise} */ sleep : function(ms) { return new Promise(resolve =&gt; setTimeout(resolve, ms)); }, /** * Convert string to hexastring * @param {String} str * @return {String} */ convertToHex : function(str) { let hex = ''; for(let i = 0; i &lt; str.length; i++) { hex += '' + str.charCodeAt(i).toString(16); } return hex; }, }; × Search results Close "},"icon-js_wallet.js.html":{"id":"icon-js_wallet.js.html","title":"Source: icon-js/wallet.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: icon-js/wallet.js /** * ICON wallet module for javascript * @module stayge-wallet/icon-js/wallet */ 'use strict' const fs = require('fs'); const key = require('./key.js'); const utils = require('./utils.js'); const jsonrpc = require('./jsonrpc.js'); const tx = require('./tx.js'); const DEFAULT_DEPLOY_STEP_LIMIT = 2000000000; // 20 ICX, step price : 0.00000001 ICX(10 Gloop) const DEFAULT_UPDATE_STEP_LIMIT = 3000000000; // 30 ICX, step price : 0.00000001 ICX(10 Gloop) const DEFAULT_TX_STEP_LIMIT = 100000000; // 1 ICX, step price : 0.00000001 ICX(10 Gloop) /** * A class for ICON Wallet * @class * @constructor * @param {Buffer} privateKey - private key for wallet */ const Wallet = function(privateKey) { this._privateKey = privateKey; this._publicKey = key.privateToPublic(privateKey); this._address = key.publicToAddress(this._publicKey); this._endpoint = utils.getEndPointFromEnv(); } /** * Get a private key of the wallet * @return {Buffer} */ Wallet.prototype.getPrivateKey = function() { return this._privateKey; } /** * Get a private key string of the wallet * @return {String} */ Wallet.prototype.getPrivateKeyString = function() { return this._privateKey.toString('hex'); } /** * Get a public key of the wallet * @return {Buffer} */ Wallet.prototype.getPublicKey = function() { return this._publicKey; } /** * Get a public key string of the wallet * @return {String} */ Wallet.prototype.getPublicKeyString = function() { return this._publicKey.toString('hex'); } /** * Get the wallet address * @return {Buffer} */ Wallet.prototype.getAddress = function() { return this._address; } /** * Get the wallet address string * @return {String} */ Wallet.prototype.getAddressString = function() { return 'hx' + this._address.toString('hex'); } /** * Convert a wallet to key store object * @param {String} password * @return {Object} */ Wallet.prototype.toKeyStoreObj = function(password) { return key.toKeyStoreObj( this.getPrivateKey(), this.getAddressString(), password ); } /** * set endpoint * @param {String} name 'mainnet' | 'testnet' */ Wallet.prototype.setEndPoint = function(name) { this._endpoint = utils.getEndPoint(name); } /** * get endpoint * @return {String} uri of endpoint */ Wallet.prototype.getEndPoint = function() { return this._endpoint; } /** * Get block information by height * @param {Number|String} height * @return {Object} */ Wallet.prototype.getBlockByHeight = function(height) { return jsonrpc.getBlockByHeight(height, this.getEndPoint().url); } /** * Get block information by hash * @param {String} height * @return {Object} */ Wallet.prototype.getBlockByHash = function(hash) { return jsonrpc.getBlockByHash(hash, this.getEndPoint().url); } /** * Get a last block information * @return {Object} */ Wallet.prototype.getLastBlock = function() { return jsonrpc.getLastBlock(this.getEndPoint().url); } /** * Get balance of the wallet * @return {String} */ Wallet.prototype.getBalance = function() { return jsonrpc.getBalance(this.getAddressString(), this.getEndPoint().url); } /** * Get total supply of ICX * @return {String} */ Wallet.prototype.getTotalSupply = function() { return jsonrpc.getTotalSupply(this.getEndPoint().url); } /** * Transfer ICX coins * @param {String} to * @param {Number} value * @return {String} txHash */ Wallet.prototype.transferICX = function(to, value) { return (async () =&gt; { const data = { from: this.getAddressString(), to: to, stepLimit: DEFAULT_TX_STEP_LIMIT, value: value, }; const rawTx = tx.makeIcxRawTx(data, this.getEndPoint().nid); const rawTxSigned = tx.signRawTx(this.getPrivateKey(), rawTx) const result = await jsonrpc.sendTransaction( rawTxSigned, this.getEndPoint().url ); return result })(); } /** * Transafer a message * @param {String} to * @param {String} msg * @return {String} txHash */ Wallet.prototype.transferMessage = function(to, msg) { return (async () =&gt; { const data = { from: this.getAddressString(), to: to, stepLimit: DEFAULT_TX_STEP_LIMIT, dataType: 'message', data: msg, }; const rawTx = tx.makeIcxRawTx(data, this.getEndPoint().nid); const rawTxSigned = tx.signRawTx(this.getPrivateKey(), rawTx) const result = await jsonrpc.sendTransaction( rawTxSigned, this.getEndPoint().url ); return result })(); } /** * Send a transaction for calling a SCORE'S method * @param {String} scoreAddress * @param {String} scoreMethod * @param {Object} methodParams * @return {String} txHash */ Wallet.prototype.callScoreTx = function(scoreAddress, scoreMethod, methodParams) { return (async () =&gt; { const data = { from: this.getAddressString(), to: scoreAddress, stepLimit: DEFAULT_TX_STEP_LIMIT, dataType: 'call', data: { method: scoreMethod }, }; if (methodParams) { data.data.params = methodParams; } const rawTx = tx.makeIcxRawTx(data, this.getEndPoint().nid); const rawTxSigned = tx.signRawTx(this.getPrivateKey(), rawTx) const result = await jsonrpc.sendTransaction( rawTxSigned, this.getEndPoint().url ); return result })(); } /** * Install a SCORE on the ICON blockchain * @param {String} to * @param {String} scoreContent * @param {Object} installParams * @return {String} txHash */ Wallet.prototype.installScore = function(scoreContent, installParams) { return (async () =&gt; { const data = { from: this.getAddressString(), to: 'cx0000000000000000000000000000000000000000', // address 0 means SCORE install stepLimit: DEFAULT_DEPLOY_STEP_LIMIT, dataType: 'deploy', data: { contentType: 'application/zip', content: scoreContent, }, }; if (installParams) { data.data.params = installParams; } const rawTx = tx.makeIcxRawTx(data, this.getEndPoint().nid); const rawTxSigned = tx.signRawTx(this.getPrivateKey(), rawTx) const result = await jsonrpc.sendTransaction( rawTxSigned, this.getEndPoint().url ); return result })(); } /** * Update a SCORE on the ICON blockchain * @param {String} scoreAddress address of score * @param {String} scoreContent score contents of hexstring format * @param {Object} updateParams parameter for update * @return {Promise&lt;String&gt;} txHash */ Wallet.prototype.updateScore = function(scoreAddress, scoreContent, updateParams) { return (async () =&gt; { const data = { from: this.getAddressString(), to: scoreAddress, stepLimit: DEFAULT_UPDATE_STEP_LIMIT, dataType: 'deploy', data: { contentType: 'application/zip', content: scoreContent, }, }; if (updateParams) { data.data.params = updateParams; } const rawTx = tx.makeIcxRawTx(data, this.getEndPoint().nid); const rawTxSigned = tx.signRawTx(this.getPrivateKey(), rawTx) const result = await jsonrpc.sendTransaction( rawTxSigned, this.getEndPoint().url ); return result })(); } /** * Call SCORE's external function * @param {String} to * @param {String} method * @param {Object} params * @return {String} */ Wallet.prototype.call = function(to, method, params) { return (async () =&gt; { const data = { from: this.getAddressString(), to: to, dataType: 'call', data: { method: method, params: params } }; const result = await jsonrpc.call( data, this.getEndPoint().url ); return result })(); } /** * Get SCORE's external API list * @param {String} address * @return {Object} */ Wallet.prototype.getScoreApi = function(address) { return jsonrpc.getScoreApi(address, this.getEndPoint().url); } /** * Get the transaction result requested by transaction hash * @param {String} txHash * @return {Object} */ Wallet.prototype.getTransactionResult = function(txHash) { return jsonrpc.getTransactionResult(txHash, this.getEndPoint().url); } /** * Get the transaction information by txHash * @param {String} txHash * @return {Object} */ Wallet.prototype.getTransactionByHash = function(txHash) { return jsonrpc.getTransactionByHash(txHash, this.getEndPoint().url); } /** * Create a new wallet with a newly generated private key * @return {Wallet} */ Wallet.create = function() { return new Wallet(key.generatePrivateKey()); } /** * @param {String} privateKeyString * @return {Wallet} */ Wallet.fromPrivateKey = function(privateKeyString) { return new Wallet(Buffer.from(privateKeyString, 'hex')); } /** * Create a wallet from a keystore object * @param {Object|string} keyStoreObj [description] * @param {String} password [description] * @return {Wallet} [description] */ Wallet.fromKeyStoreObj = function(keyStoreObj, password) { //console.log('typeof keyStoreObj:'+typeof keyStoreObj); const json = (typeof keyStoreObj === 'object') ? keyStoreObj : JSON.parse(keyStoreObj); return new Wallet(key.privateKeyFromKeyStoreObj( json, password )); } /** @type {Wallet} */ module.exports = Wallet; × Search results Close "},"wallet_stg.js.html":{"id":"wallet_stg.js.html","title":"Source: wallet/stg.js","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Source: wallet/stg.js /** * Provides smart contract APIs for STG * @module stayge-wallet/stg */ 'use strict' const utils = require('../icon-js/utils.js'); /** * Smart contract APIs for STG * @class * @constructor * @param {Wallet} wallet * @param {String} scoreAddress contract address of STG */ const STG = function(wallet, scoreAddress) { this._wallet = wallet; this._scoreAddress = scoreAddress; } /** * Returns name * @return {Promise&lt;String&gt;} */ STG.prototype.name = async function() { const name = await this._wallet.call( this._scoreAddress, 'name', {} ); return name; } /** * Returns symbol * @return {Promise&lt;String&gt;} */ STG.prototype.symbol = async function() { const symbol = await this._wallet.call( this._scoreAddress, 'symbol', {} ); return symbol; } /** * Returns decimals * @return {Promise&lt;Number&gt;} */ STG.prototype.decimals = async function() { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return utils.toBigNumber(decimals).toNumber(); } /** * Returns total supply * @return {Promise&lt;Number&gt;} */ STG.prototype.totalSupply = async function() { const totalSupply = await this._wallet.call( this._scoreAddress, 'totalSupply', {} ); const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return utils .toBigNumber(totalSupply) .dividedBy(10 ** utils.toBigNumber(decimals)) .toNumber(); } /** * Returns balance of STG for the specified owner * @param {String} owner address of owner * @return {Promise&lt;Number&gt;} */ STG.prototype.balanceOf = async function(owner) { owner = owner || this._wallet.getAddressString(); const balance = await this._wallet.call( this._scoreAddress, 'balanceOf', {_owner: owner} ); const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return utils .toBigNumber(balance) .dividedBy(10 ** utils.toBigNumber(decimals)) .toNumber(); } /** * Transfer STG to the specified recipient * @param {String} to address of the recipient * @param {Number} value the amount to transfer * @param {String} data optional * @return {Promise&lt;String&gt;} txHash */ STG.prototype.transfer = async function(to, value, data='') { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'transfer', { _to: to, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), _data: data.length &gt; 0 ? utils.convertToHex(data) : data, } ); } /** * Returns allowance of the spender for the owner balance * @param {String} owner address of the owner * @param {String} spender address of the spender * @return {Promise&lt;Number&gt;} */ STG.prototype.allowance = async function(owner, spender) { const allowance = await this._wallet.call( this._scoreAddress, 'allowance', {_owner: owner, _spender: spender} ); const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return utils .toBigNumber(allowance) .dividedBy(10 ** utils.toBigNumber(decimals)) .toNumber(); } /** * Approve spender to transfer the specified STG from the owner's balance * @param {String} spender address of the spender * @param {Number} value STG amount to approve * @return {Promise&lt;String&gt;} txHash */ STG.prototype.approve = async function(spender, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'approve', { _spender: spender, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Increase allowance of the spender for the owner's balance * @param {String} spender address of the spender * @param {Number} value STG amount to increase * @return {Promise&lt;String&gt;} txHash */ STG.prototype.incAllowance = async function(spender, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'inc_allowance', { _spender: spender, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Decrease allowance of the spender for the owner's balance * @param {String} spender address of the spender * @param {Number} value STG amount to decrease * @return {Promise&lt;String&gt;} txHash */ STG.prototype.decAllowance = async function(spender, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'dec_allowance', { _spender: spender, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Tranfer STG from sender to recipient * Only the amount of allowance from sender can be tranferred * @param {String} from address of the sender * @param {String} to address of the recipient * @param {Number} value STG amount to transfer * @return {Promise&lt;String&gt;} txHash */ STG.prototype.transferFrom = async function(from, to, value) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'transfer_from', { _from: from, _to: to, _value: utils.toHexString( utils.toBigNumber(value).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Mint tokens and allocate to the contract owner * @param {Number} amount amount to mint * @return {Promise&lt;String&gt;} txHash */ STG.prototype.mint = async function(amount) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'mint', { _amount: utils.toHexString( utils.toBigNumber(amount).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Burn tokens * @param {Number} amount amount to burn * @return {Promise&lt;String&gt;} txHash */ STG.prototype.burn = async function(amount) { const decimals = await this._wallet.call( this._scoreAddress, 'decimals', {} ); return this._wallet.callScoreTx( this._scoreAddress, 'burn', { _amount: utils.toHexString( utils.toBigNumber(amount).times(10 ** utils.toBigNumber(decimals)) ), } ); } /** * Pause contract to disable it's functionalities * @return {Promise&lt;String&gt;} txHash */ STG.prototype.pause = async function() { return this._wallet.callScoreTx( this._scoreAddress, 'pause', ); } /** * Unpause contract to enable it's functionalities * @return {Promise&lt;String&gt;} txHash */ STG.prototype.unpause = async function() { return this._wallet.callScoreTx( this._scoreAddress, 'unpause', ); } /** * Returns whether the contract is paused or not * @return {Promise&lt;Bool&gt;} true: paused, false: unpaused */ STG.prototype.paused = async function() { const paused = await this._wallet.call( this._scoreAddress, 'paused', {} ); if (paused == '0x1') { return true; } else { return false; } } /** * set/unset blacklist * @param {String} account address to be set/unset as blacklist * @param {Bool} flag true:set, false:unset * @return {Promise&lt;String&gt;} txHash */ STG.prototype.setBlacklist = async function(account, flag) { return this._wallet.callScoreTx( this._scoreAddress, 'set_blacklist', { _account: account, _value:utils.toHexString(flag ? 1 : 0) } ); } /** * set/unset whitelist * @param {String} account address to be set/unset as whitelist * @param {Bool} flag true:set, false:unset * @return {Promise&lt;String&gt;} txHash */ STG.prototype.setWhitelist = async function(account, flag) { return this._wallet.callScoreTx( this._scoreAddress, 'set_whitelist', { _account: account, _value:utils.toHexString(flag ? 1 : 0) } ); } module.exports = STG; × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Modules Classes ACT Wallet STG Wallet × Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Classes Classes ACT Wallet STG Wallet × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet × Search results Close "},"module-stayge-wallet.html":{"id":"module-stayge-wallet.html","title":"Module: stayge-wallet","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet STAYGE wallet module for javascript Source: wallet/index.js, line 1 Classes Wallet × Search results Close "},"module-stayge-wallet_act.html":{"id":"module-stayge-wallet_act.html","title":"Module: stayge-wallet/act","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/act Provides smart contract APIs for ACT Source: wallet/act.js, line 1 Classes ACT × Search results Close "},"module-stayge-wallet_act-ACT.html":{"id":"module-stayge-wallet_act-ACT.html","title":"Class: ACT","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Class: ACT stayge-wallet/act~ ACT new ACT(wallet, scoreAddress) Smart contract APIs for ACT Parameters: Name Type Description wallet Wallet scoreAddress String contract address of ACT Source: wallet/act.js, line 18 Methods allowance(owner, spender) Returns allowance of the spender for the owner balance Parameters: Name Type Description owner String address of the owner spender String address of the spender Source: wallet/act.js, line 152 Returns: Type Promise.&lt;Number&gt; approve(spender, value) Approve spender to transfer the specified ACT from the owner's balance Parameters: Name Type Description spender String address of the spender value Number ACT amount to approve Source: wallet/act.js, line 178 Returns: txHash Type Promise.&lt;String&gt; balanceOf(owner) Returns balance of ACT for the specified owner Parameters: Name Type Description owner String address of owner Source: wallet/act.js, line 97 Returns: Type Promise.&lt;Number&gt; burn(amount) Burn tokens Parameters: Name Type Description amount Number amount to burn Source: wallet/act.js, line 309 Returns: txHash Type Promise.&lt;String&gt; decAllowance(spender, value) Decrease allowance of the spender for the owner's balance Parameters: Name Type Description spender String address of the spender value Number ACT amount to decrease Source: wallet/act.js, line 230 Returns: txHash Type Promise.&lt;String&gt; decimals() Returns decimals Source: wallet/act.js, line 57 Returns: Type Promise.&lt;Number&gt; incAllowance(spender, value) Increase allowance of the spender for the owner's balance Parameters: Name Type Description spender String address of the spender value Number ACT amount to increase Source: wallet/act.js, line 204 Returns: txHash Type Promise.&lt;String&gt; mint(to, amount) Mint tokens and allocate to the specified recipient Parameters: Name Type Description to String address of the recipient amount Number amount to mint Source: wallet/act.js, line 284 Returns: txHash Type Promise.&lt;String&gt; name() Returns name Source: wallet/act.js, line 27 Returns: Type Promise.&lt;String&gt; pause() Pause contract to disable it's functionalities Source: wallet/act.js, line 332 Returns: txHash Type Promise.&lt;String&gt; paused() Returns whether the contract is paused or not Source: wallet/act.js, line 356 Returns: true: paused, false: unpaused Type Promise.&lt;Bool&gt; setBlacklist(account, flag) set/unset blacklist Parameters: Name Type Description account String address to be set/unset as blacklist flag Bool true:set, false:unset Source: wallet/act.js, line 377 Returns: txHash Type Promise.&lt;String&gt; setWhitelist(account, flag) set/unset whitelist Parameters: Name Type Description account String address to be set/unset as whitelist flag Bool true:set, false:unset Source: wallet/act.js, line 395 Returns: txHash Type Promise.&lt;String&gt; symbol() Returns symbol Source: wallet/act.js, line 42 Returns: Type Promise.&lt;String&gt; totalSupply() Returns total supply Source: wallet/act.js, line 72 Returns: Type Promise.&lt;Number&gt; transfer(to, value, data) Transfer ACT to the specified recipient Parameters: Name Type Description to String address of the recipient value Number the amount to transfer data String optional Source: wallet/act.js, line 125 Returns: txHash Type Promise.&lt;String&gt; transferFrom(from, to, value) Tranfer ACT from sender to recipientOnly the amount of allowance from sender can be tranferred Parameters: Name Type Description from String address of the sender to String address of the recipient value Number ACT amount to transfer Source: wallet/act.js, line 258 Returns: txHash Type Promise.&lt;String&gt; unpause() Unpause contract to enable it's functionalities Source: wallet/act.js, line 344 Returns: txHash Type Promise.&lt;String&gt; × Search results Close "},"module-stayge-wallet_icon-js_jsonrpc.html":{"id":"module-stayge-wallet_icon-js_jsonrpc.html","title":"Module: stayge-wallet/icon-js/jsonrpc","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/icon-js/jsonrpc Provides APIs for jsonrpc of ICON Source: icon-js/jsonrpc.js, line 1 Methods &lt;static&gt; call(params, endpoint) call SCORE's external function Parameters: Name Type Description params Object endpoint String Source: icon-js/jsonrpc.js, line 328 Returns: Type Promise.&lt;String&gt; &lt;static&gt; getBalance(address, endpoint) Get a balance of the address Parameters: Name Type Description address String endpoint String Source: icon-js/jsonrpc.js, line 76 Returns: balance Type Promise.&lt;String&gt; &lt;static&gt; getBlockByHash(hash, endpoint) Get a block information by hash Parameters: Name Type Description hash String endpoint String Source: icon-js/jsonrpc.js, line 132 Returns: Type Promise.&lt;Object&gt; &lt;static&gt; getBlockByHeight(height, endpoint) Get a block information by height Parameters: Name Type Description height Number endpoint String Source: icon-js/jsonrpc.js, line 101 Returns: Type Promise.&lt;Object&gt; &lt;static&gt; getLastBlock(endpoint) Get a last block information Parameters: Name Type Description endpoint String Source: icon-js/jsonrpc.js, line 161 Returns: Type Promise.&lt;Object&gt; &lt;static&gt; getScoreApi(address, endpoint) Return score api Parameters: Name Type Description address String endpoint String Source: icon-js/jsonrpc.js, line 298 Returns: Type Promise.&lt;Object&gt; &lt;static&gt; getTotalSupply(endpoint) Get total supply of ICX Parameters: Name Type Description endpoint String Source: icon-js/jsonrpc.js, line 275 Returns: total supply Type Promise.&lt;String&gt; &lt;static&gt; getTransactionByHash(txHash, endpoint) Get the transaction information by txHash Parameters: Name Type Description txHash String endpoint String Source: icon-js/jsonrpc.js, line 247 Returns: transaction information Type Promise.&lt;Object&gt; &lt;static&gt; getTransactionResult(txHash, endpoint) Get the transaction result requested by transaction hash Parameters: Name Type Description txHash String endpoint String Source: icon-js/jsonrpc.js, line 217 Returns: Type Promise.&lt;Object&gt; &lt;static&gt; sendTransaction(rawTx, endpoint) Send a transaction Parameters: Name Type Description rawTx Object [description] endpoint String [description] Source: icon-js/jsonrpc.js, line 189 Returns: transaction hash Type Promise.&lt;String&gt; &lt;inner&gt; getCurrentApiPrefix() Return prefix string of current api version Source: icon-js/jsonrpc.js, line 19 Returns: Type String &lt;async, inner&gt; requestJsonRpc(url, payload) Make a request via json rpc Parameters: Name Type Description url String payload Object Source: icon-js/jsonrpc.js, line 50 Returns: Type Promise.&lt;Object&gt; &lt;inner&gt; toPayload(method, params) Return payload for json rpc 2.0 Parameters: Name Type Description method String params Object Source: icon-js/jsonrpc.js, line 29 Returns: Type Object × Search results Close "},"module-stayge-wallet_icon-js_key.html":{"id":"module-stayge-wallet_icon-js_key.html","title":"Module: stayge-wallet/icon-js/key","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/icon-js/key Provides key related functions for ICON Source: icon-js/key.js, line 1 Methods &lt;static&gt; generatePrivateKey() Generate a new private key Source: icon-js/key.js, line 22 Returns: Type Buffer &lt;static&gt; privateKeyFromKeyStoreObj(keyStoreObj, password) Get a private key from the key store object Parameters: Name Type Description keyStoreObj Object password string Source: icon-js/key.js, line 49 Returns: private key Type Buffer &lt;static&gt; privateToPublic(privateKey) Parameters: Name Type Description privateKey Buffer Source: icon-js/key.js, line 30 Returns: Type Buffer &lt;static&gt; publicToAddress(publicKey) Parameters: Name Type Description publicKey Buffer Source: icon-js/key.js, line 38 Returns: Type Buffer &lt;static&gt; toKeyStoreObj(privateKey, address, password, options) Return a keystore object from the wallet information Parameters: Name Type Description privateKey Buffer address String password String options Object Source: icon-js/key.js, line 132 Returns: keystore object Type Object × Search results Close "},"module-stayge-wallet_icon-js_tx.html":{"id":"module-stayge-wallet_icon-js_tx.html","title":"Module: stayge-wallet/icon-js/tx","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/icon-js/tx Provides transaction related functions for ICON Source: icon-js/tx.js, line 1 Methods &lt;static&gt; makeIcxRawTx(data, nid) Make a raw transaction for ICX Parameters: Name Type Description data Object nid String Source: icon-js/tx.js, line 160 Returns: Type Object &lt;static&gt; signRawTx(privateKey, rawTx) Sign a raw transaction Parameters: Name Type Description privateKey Buffer rawTx Object Source: icon-js/tx.js, line 194 Returns: Type Object &lt;inner&gt; concatTypedArrays(a, b) Concatenate two typed arrays Parameters: Name Type Description a TypedArray b TypedArray Source: icon-js/tx.js, line 143 Returns: Type Buffer &lt;inner&gt; escapeString(value) Escape a string for transaction Parameters: Name Type Description value String Source: icon-js/tx.js, line 126 Returns: Type String &lt;inner&gt; generateHashKey(obj) Generate a hash key for transaction Parameters: Name Type Description obj Object Source: icon-js/tx.js, line 21 Returns: Type String &lt;inner&gt; serializeArray(arr) Serialize a array for transaction Parameters: Name Type Description arr Array Source: icon-js/tx.js, line 87 Returns: Type String &lt;inner&gt; serializeObj(obj) Serialize a object for transaction Parameters: Name Type Description obj Object Source: icon-js/tx.js, line 38 Returns: Type String × Search results Close "},"module-stayge-wallet_icon-js_utils.html":{"id":"module-stayge-wallet_icon-js_utils.html","title":"Module: stayge-wallet/icon-js/utils","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/icon-js/utils Provides utility functions Source: icon-js/utils.js, line 1 Methods &lt;static&gt; convertToHex(str) Convert string to hexastring Parameters: Name Type Description str String Source: icon-js/utils.js, line 134 Returns: Type String &lt;static&gt; convertToIcx(a) Convert to icx unit Parameters: Name Type Description a Number | String | BigNumber number, string, HEX string or BigNumber Source: icon-js/utils.js, line 56 Returns: Type String &lt;static&gt; convertToLoop(value) Convert to loop unit Parameters: Name Type Description value Number | String | BigNumber Source: icon-js/utils.js, line 67 Returns: Type BigNumber &lt;static&gt; getEndPoint(name) Returns endpoint of the specified name Parameters: Name Type Description name String mainnet | testnet Source: icon-js/utils.js, line 102 Returns: Type Object &lt;static&gt; getEndPointFromEnv() Get a endpoint for current environment Source: icon-js/utils.js, line 110 Returns: Type String &lt;static&gt; isBigNumber() Returns true if object is BigNumber, otherwise false Parameters: Type Description Object Source: icon-js/utils.js, line 30 Returns: Type Boolean &lt;static&gt; isString(object) Returns true if object is string, otherwise false Parameters: Name Type Description object Object Source: icon-js/utils.js, line 18 Returns: Type Boolean &lt;static&gt; sleep(ms) Sleep for the specified time Parameters: Name Type Description ms Number milliseconds Source: icon-js/utils.js, line 125 Returns: Type Promise &lt;static&gt; toBigNumber(a) Transforms into an bignumber Parameters: Name Type Description a Number | String | BigNumber number, string, HEX string or BigNumber Source: icon-js/utils.js, line 39 Returns: BigNumber Type BigNumber &lt;static&gt; toHashString(value) Convert to hash string leading '0x' Parameters: Name Type Description value String Source: icon-js/utils.js, line 93 Returns: Type String &lt;static&gt; toHexString(value) Convert a number to hexadecimal string Parameters: Name Type Description value Number | String | BigNumber Source: icon-js/utils.js, line 76 Returns: Type String × Search results Close "},"module-stayge-wallet_icon-js_wallet.html":{"id":"module-stayge-wallet_icon-js_wallet.html","title":"Module: stayge-wallet/icon-js/wallet","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/icon-js/wallet ICON wallet module for javascript Source: icon-js/wallet.js, line 1 Classes Wallet × Search results Close "},"module-stayge-wallet_icon-js_wallet-Wallet.html":{"id":"module-stayge-wallet_icon-js_wallet-Wallet.html","title":"Class: Wallet","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Class: Wallet stayge-wallet/icon-js/wallet~ Wallet new Wallet(privateKey) A class for ICON Wallet Parameters: Name Type Description privateKey Buffer private key for wallet Source: icon-js/wallet.js, line 24 Methods &lt;static&gt; create() Create a new wallet with a newly generated private key Source: icon-js/wallet.js, line 384 Returns: Type Wallet &lt;static&gt; fromKeyStoreObj(keyStoreObj, password) Create a wallet from a keystore object Parameters: Name Type Description keyStoreObj Object | string [description] password String [description] Source: icon-js/wallet.js, line 402 Returns: [description] Type Wallet &lt;static&gt; fromPrivateKey(privateKeyString) Parameters: Name Type Description privateKeyString String Source: icon-js/wallet.js, line 392 Returns: Type Wallet call(to, method, params) Call SCORE's external function Parameters: Name Type Description to String method String params Object Source: icon-js/wallet.js, line 329 Returns: Type String callScoreTx(scoreAddress, scoreMethod, methodParams) Send a transaction for calling a SCORE'S method Parameters: Name Type Description scoreAddress String scoreMethod String methodParams Object Source: icon-js/wallet.js, line 221 Returns: txHash Type String getAddress() Get the wallet address Source: icon-js/wallet.js, line 71 Returns: Type Buffer getAddressString() Get the wallet address string Source: icon-js/wallet.js, line 79 Returns: Type String getBalance() Get balance of the wallet Source: icon-js/wallet.js, line 146 Returns: Type String getBlockByHash(height) Get block information by hash Parameters: Name Type Description height String Source: icon-js/wallet.js, line 128 Returns: Type Object getBlockByHeight(height) Get block information by height Parameters: Name Type Description height Number | String Source: icon-js/wallet.js, line 118 Returns: Type Object getEndPoint() get endpoint Source: icon-js/wallet.js, line 108 Returns: uri of endpoint Type String getLastBlock() Get a last block information Source: icon-js/wallet.js, line 137 Returns: Type Object getPrivateKey() Get a private key of the wallet Source: icon-js/wallet.js, line 36 Returns: Type Buffer getPrivateKeyString() Get a private key string of the wallet Source: icon-js/wallet.js, line 44 Returns: Type String getPublicKey() Get a public key of the wallet Source: icon-js/wallet.js, line 53 Returns: Type Buffer getPublicKeyString() Get a public key string of the wallet Source: icon-js/wallet.js, line 62 Returns: Type String getScoreApi(address) Get SCORE's external API list Parameters: Name Type Description address String Source: icon-js/wallet.js, line 356 Returns: Type Object getTotalSupply() Get total supply of ICX Source: icon-js/wallet.js, line 155 Returns: Type String getTransactionByHash(txHash) Get the transaction information by txHash Parameters: Name Type Description txHash String Source: icon-js/wallet.js, line 376 Returns: Type Object getTransactionResult(txHash) Get the transaction result requested by transaction hash Parameters: Name Type Description txHash String Source: icon-js/wallet.js, line 366 Returns: Type Object installScore(to, scoreContent, installParams) Install a SCORE on the ICON blockchain Parameters: Name Type Description to String scoreContent String installParams Object Source: icon-js/wallet.js, line 257 Returns: txHash Type String setEndPoint(name) set endpoint Parameters: Name Type Description name String 'mainnet' | 'testnet' Source: icon-js/wallet.js, line 100 toKeyStoreObj(password) Convert a wallet to key store object Parameters: Name Type Description password String Source: icon-js/wallet.js, line 88 Returns: Type Object transferICX(to, value) Transfer ICX coins Parameters: Name Type Description to String value Number Source: icon-js/wallet.js, line 165 Returns: txHash Type String transferMessage(to, msg) Transafer a message Parameters: Name Type Description to String msg String Source: icon-js/wallet.js, line 192 Returns: txHash Type String updateScore(scoreAddress, scoreContent, updateParams) Update a SCORE on the ICON blockchain Parameters: Name Type Description scoreAddress String address of score scoreContent String score contents of hexstring format updateParams Object parameter for update Source: icon-js/wallet.js, line 293 Returns: txHash Type Promise.&lt;String&gt; × Search results Close "},"module-stayge-wallet_stg.html":{"id":"module-stayge-wallet_stg.html","title":"Module: stayge-wallet/stg","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Module: stayge-wallet/stg Provides smart contract APIs for STG Source: wallet/stg.js, line 1 Classes STG × Search results Close "},"module-stayge-wallet_stg-STG.html":{"id":"module-stayge-wallet_stg-STG.html","title":"Class: STG","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Class: STG stayge-wallet/stg~ STG new STG(wallet, scoreAddress) Smart contract APIs for STG Parameters: Name Type Description wallet Wallet scoreAddress String contract address of STG Source: wallet/stg.js, line 18 Methods allowance(owner, spender) Returns allowance of the spender for the owner balance Parameters: Name Type Description owner String address of the owner spender String address of the spender Source: wallet/stg.js, line 147 Returns: Type Promise.&lt;Number&gt; approve(spender, value) Approve spender to transfer the specified STG from the owner's balance Parameters: Name Type Description spender String address of the spender value Number STG amount to approve Source: wallet/stg.js, line 172 Returns: txHash Type Promise.&lt;String&gt; balanceOf(owner) Returns balance of STG for the specified owner Parameters: Name Type Description owner String address of owner Source: wallet/stg.js, line 94 Returns: Type Promise.&lt;Number&gt; burn(amount) Burn tokens Parameters: Name Type Description amount Number amount to burn Source: wallet/stg.js, line 297 Returns: txHash Type Promise.&lt;String&gt; decAllowance(spender, value) Decrease allowance of the spender for the owner's balance Parameters: Name Type Description spender String address of the spender value Number STG amount to decrease Source: wallet/stg.js, line 222 Returns: txHash Type Promise.&lt;String&gt; decimals() Returns decimals Source: wallet/stg.js, line 55 Returns: Type Promise.&lt;Number&gt; incAllowance(spender, value) Increase allowance of the spender for the owner's balance Parameters: Name Type Description spender String address of the spender value Number STG amount to increase Source: wallet/stg.js, line 197 Returns: txHash Type Promise.&lt;String&gt; mint(amount) Mint tokens and allocate to the contract owner Parameters: Name Type Description amount Number amount to mint Source: wallet/stg.js, line 274 Returns: txHash Type Promise.&lt;String&gt; name() Returns name Source: wallet/stg.js, line 27 Returns: Type Promise.&lt;String&gt; pause() Pause contract to disable it's functionalities Source: wallet/stg.js, line 319 Returns: txHash Type Promise.&lt;String&gt; paused() Returns whether the contract is paused or not Source: wallet/stg.js, line 341 Returns: true: paused, false: unpaused Type Promise.&lt;Bool&gt; setBlacklist(account, flag) set/unset blacklist Parameters: Name Type Description account String address to be set/unset as blacklist flag Bool true:set, false:unset Source: wallet/stg.js, line 361 Returns: txHash Type Promise.&lt;String&gt; setWhitelist(account, flag) set/unset whitelist Parameters: Name Type Description account String address to be set/unset as whitelist flag Bool true:set, false:unset Source: wallet/stg.js, line 378 Returns: txHash Type Promise.&lt;String&gt; symbol() Returns symbol Source: wallet/stg.js, line 41 Returns: Type Promise.&lt;String&gt; totalSupply() Returns total supply Source: wallet/stg.js, line 70 Returns: Type Promise.&lt;Number&gt; transfer(to, value, data) Transfer STG to the specified recipient Parameters: Name Type Description to String address of the recipient value Number the amount to transfer data String optional Source: wallet/stg.js, line 121 Returns: txHash Type Promise.&lt;String&gt; transferFrom(from, to, value) Tranfer STG from sender to recipientOnly the amount of allowance from sender can be tranferred Parameters: Name Type Description from String address of the sender to String address of the recipient value Number STG amount to transfer Source: wallet/stg.js, line 249 Returns: txHash Type Promise.&lt;String&gt; unpause() Unpause contract to enable it's functionalities Source: wallet/stg.js, line 330 Returns: txHash Type Promise.&lt;String&gt; × Search results Close "},"module-stayge-wallet-Wallet.html":{"id":"module-stayge-wallet-Wallet.html","title":"Class: Wallet","body":" DocStrap Modules stayge-walletstayge-wallet/actstayge-wallet/icon-js/jsonrpcstayge-wallet/icon-js/keystayge-wallet/icon-js/txstayge-wallet/icon-js/utilsstayge-wallet/icon-js/walletstayge-wallet/stg Classes stayge-wallet/act~ACTstayge-wallet/icon-js/wallet~Walletstayge-wallet/stg~STGstayge-wallet~Wallet Class: Wallet stayge-wallet~ Wallet new Wallet(baseWallet) Provides wallet API for STAYGE Network Parameters: Name Type Description baseWallet Object underlying wallet object Source: wallet/index.js, line 21 Methods &lt;static&gt; create() Create a new wallet with a newly generated private key Source: wallet/index.js, line 302 Returns: Type Wallet &lt;static&gt; fromKeyStoreFile(keyStorePath, password) Create a wallet from a keystore file Parameters: Name Type Description keyStorePath String password String Source: wallet/index.js, line 331 Returns: Type Wallet &lt;static&gt; fromKeyStoreObj(keyStoreObj, password) Create a wallet from a keystore object Parameters: Name Type Description keyStoreObj Object | String password String Source: wallet/index.js, line 320 Returns: Type Wallet &lt;static&gt; fromPrivateKey(privateKeyString) Parameters: Name Type Description privateKeyString String Source: wallet/index.js, line 310 Returns: Type Wallet act(scoreAddress) Return ACT socre object with the specified score address Parameters: Name Type Description scoreAddress String address of score Source: wallet/index.js, line 39 Returns: score object of ACT Type ACT call(to, method, params) Call SCORE's external function Parameters: Name Type Description to String method String params Object Source: wallet/index.js, line 246 Returns: Type Promise.&lt;String&gt; callScoreTx(scoreAddress, scoreMethod, methodParams) Send a transaction for calling a SCORE'S method Parameters: Name Type Description scoreAddress String scoreMethod String methodParams Object Source: wallet/index.js, line 198 Returns: hash of transacgtion Type Promise.&lt;String&gt; getAddress() Get the wallet address Source: wallet/index.js, line 82 Returns: Type Buffer getAddressString() Get the wallet address string Source: wallet/index.js, line 90 Returns: Type String getBalance() Get balance of the wallet Source: wallet/index.js, line 153 Returns: balance of the wallet owner Type Promise.&lt;String&gt; getBlockByHash(height) Get block information by hash Parameters: Name Type Description height String hash of block Source: wallet/index.js, line 135 Returns: block information Type Promise.&lt;Object&gt; getBlockByHeight(height) Get block information by height Parameters: Name Type Description height Number | String height of block Source: wallet/index.js, line 125 Returns: block information Type Promise.&lt;Object&gt; getEndPoint() get endpoint Source: wallet/index.js, line 115 Returns: endpoint information Type String getLastBlock() Get a last block information Source: wallet/index.js, line 144 Returns: block information Type Promise.&lt;Object&gt; getPrivateKey() Get the private key of the wallet Source: wallet/index.js, line 47 Returns: Type Buffer getPrivateKeyString() Get the private key string of the wallet Source: wallet/index.js, line 55 Returns: Type String getPublicKey() Get a public key of the wallet Source: wallet/index.js, line 64 Returns: Type Buffer getPublicKeyString() Get a public key string of the wallet Source: wallet/index.js, line 73 Returns: Type String getScoreApi(address) Get SCORE's external API list Parameters: Name Type Description address String Source: wallet/index.js, line 256 Returns: Type Promise.&lt;Object&gt; getTotalSupply() Get total supply of ICX Source: wallet/index.js, line 162 Returns: total supply of underlying network Type Promise.&lt;String&gt; getTransactionByHash(txHash) Get the transaction information by txHash Parameters: Name Type Description txHash String Source: wallet/index.js, line 294 Returns: Type Promise.&lt;Object&gt; getTransactionResult(txHash) Get the transaction result requested by transaction hash Parameters: Name Type Description txHash String Source: wallet/index.js, line 266 Returns: Type Promise.&lt;Object&gt; installScore(scorePath, installParams) Install a SCORE on the ICON blockchain Parameters: Name Type Description scorePath String installParams Object Source: wallet/index.js, line 214 Returns: txHash Type Promise.&lt;String&gt; setEndPoint(name) set endpoint Parameters: Name Type Description name String 'mainnet' | 'testnet' Source: wallet/index.js, line 107 stg(scoreAddress) Return STG score object with the specified score address Parameters: Name Type Description scoreAddress String address of score Source: wallet/index.js, line 30 Returns: score object of STG Type STG toKeyStoreObj(password) Convert a wallet to key store object Parameters: Name Type Description password String password for the wallet Source: wallet/index.js, line 99 Returns: Type Object transferICX(to, value) Transfer ICX coins Parameters: Name Type Description to String address of recipient value Number value to transfer Source: wallet/index.js, line 172 Returns: hash of transaction Type Promise.&lt;String&gt; transferMessage(to, msg) Transafer a message Parameters: Name Type Description to String address of recipent msg String message to transfer Source: wallet/index.js, line 183 Returns: hash of transaction Type Promise.&lt;String&gt; updateScore(scoreAddress, scorePath, updateParams) Update a SCORE on the ICON blockchain Parameters: Name Type Description scoreAddress type scorePath type updateParams type Source: wallet/index.js, line 228 Returns: txHash Type Promise.&lt;String&gt; × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
